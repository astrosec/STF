<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>STF: ネームスペース sgp4</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- 作成： Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'検索');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">STF</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li class="current"><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="検索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="namespaces.html"><span>ネームスペース一覧</span></a></li>
      <li><a href="namespacemembers.html"><span>ネームスペースメンバ</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">構成</a> &#124;
<a href="#typedef-members">型定義</a> &#124;
<a href="#enum-members">列挙型</a> &#124;
<a href="#func-members">関数</a>  </div>
  <div class="headertitle">
<h1>ネームスペース sgp4</h1>  </div>
</div>
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
構成</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsgp4_1_1elsetrec.html">elsetrec</a></td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
型定義</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structsgp4_1_1elsetrec.html">sgp4::elsetrec</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#ac1efaa98f6fc1ca026409b0ded1e2f54">elsetrec</a></td></tr>
<tr><td colspan="2"><h2><a name="enum-members"></a>
列挙型</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#a84be244094e484a8e83cc5dcb7b46e9e">gravconsttype</a> { <a class="el" href="namespacesgp4.html#a84be244094e484a8e83cc5dcb7b46e9eada1c4cc7011593a9ddb004935f8001fd">wgs72old</a>, 
<a class="el" href="namespacesgp4.html#a84be244094e484a8e83cc5dcb7b46e9ea61278da3b464fd069a7e15add91bd2f1">wgs72</a>, 
<a class="el" href="namespacesgp4.html#a84be244094e484a8e83cc5dcb7b46e9eaa032d1c92304c8ac7c3d596f2c5d15d3">wgs84</a>
 }</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
関数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#a499faf17ea23fa547ffab23852a73b3d">SiderealTime</a> (double jd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#a7e24ee7f1d6c6d0f6daab2c86535d193">TransGeoToGAxis</a> (double lon, double lat, double alt, double *pos)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#ab49fc7d8fdbe1c7e023c3813e23ac58f">TransGAxis</a> (double *pos, double gmst, double *gpos)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#aaf7b0b8ca0b3373f4c447be71c5301f3">TransECIToGeo</a> (double gmst, double *pos, double *lon, double *lat, double *alt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#a9c94818fe78bb21e99c4aed69a260b35">CalculateSolarPosition</a> (double jd, double *solar_vector)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#adf826ad7de34c5831d6cc9ee1757d7b1">SatEclipsed</a> (double *pos, double *sol)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#a4d08f7868fb59bf558b072f0cc7d415d">SatEclipsed</a> (double *pos, double *sol, double *depth)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#a170fbd9d334b25983469ed488ab42a5f">RotationX</a> (const double *bfr, double *aft, double theta)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#ad01ceb467c3d61ff41dc8284b062c29f">RotationY</a> (const double *bfr, double *aft, double theta)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#a7d8c97a0bbbff0e1ab6789977455fb65">RotationZ</a> (const double *bfr, double *aft, double theta)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#a6ba0a1de0611eb0e0b7201933cc554d1">AcTan</a> (double sinx, double cosx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#ad494013e1053a9198a9bd832ae274968">FMod2p</a> (double x)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#a48f131e78fd7a4884cd66bc093c84bcb">sgn</a> (double x)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#ab3dbec9b4b204d257df654a8f600b15b">mag</a> (double x[3])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#a546c8595c160d44e5e994a3a9e45d85c">cross</a> (double vec1[3], double vec2[3], double outvec[3])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#a0721aaf7c1f3a342afbd8d92b1492114">dot</a> (double x[3], double y[3])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#ae9c168481b4b05275072b4feb66b423f">angle</a> (double vec1[3], double vec2[3])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#a56488bb8bf6bea188f1472a95f28ce6b">asinh</a> (double xval)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#a63774ae5d016cd3990eb1734f5eee90d">newtonnu</a> (double ecc, double nu, double &amp;e0, double &amp;m)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#a3a7caa6f07a4fabd5ae23f734672a4f5">rv2coe</a> (double r[3], double v[3], double mu, double &amp;p, double &amp;a, double &amp;ecc, double &amp;incl, double &amp;omega, double &amp;argp, double &amp;nu, double &amp;m, double &amp;arglat, double &amp;truelon, double &amp;lonper)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#a68d086bce456f80fbde1e96b5a5a1d90">jday</a> (int year, int mon, int day, int hr, int minute, double sec, double &amp;jd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#a4650c9e8c59a3a79421c9112b68cce74">days2mdhms</a> (int year, double days, int &amp;mon, int &amp;day, int &amp;hr, int &amp;minute, double &amp;sec)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#a93d1353845a69e2545718525df9b500b">invjday</a> (double jd, int &amp;year, int &amp;mon, int &amp;day, int &amp;hr, int &amp;minute, double &amp;sec)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#a419dfa07666feea28b59f5959414bb1e">JdToDecyear</a> (double jd, double *decyear)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#afd3a32833e92812cbbd04dfbb1800071">mag</a> (double[])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#a852eb1c1452abb02fa71638c9e4e3090">cross</a> (double[], double[], double[])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#a842a3e2b50466c8e373eacbf10f736fb">dot</a> (double[], double[])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#a55168f7f6a78a3a0fa478d48607b8fbe">angle</a> (double[], double[])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#aa1d263cd64e9084440e2dd17a089507f">rv2coe</a> (double[], double[], double, double &amp;, double &amp;, double &amp;, double &amp;, double &amp;, double &amp;, double &amp;, double &amp;, double &amp;, double &amp;, double &amp;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#a57cb684c890eaa1ac2fbdfab2b904652">juldayTEST</a> (int, int, int)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#a291d74ec01a1ba363d6cc3b455a98b8c">twoline2rv</a> (char longstr1[130], char longstr2[130], char typerun, char typeinput, <a class="el" href="namespacesgp4.html#a84be244094e484a8e83cc5dcb7b46e9e">gravconsttype</a> whichconst, double &amp;startmfe, double &amp;stopmfe, double &amp;deltamin, <a class="el" href="structsgp4_1_1elsetrec.html">elsetrec</a> &amp;satrec)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#ac99253d85e493f5725d01920b0303a69">sgp4init</a> (<a class="el" href="namespacesgp4.html#a84be244094e484a8e83cc5dcb7b46e9e">gravconsttype</a> whichconst, const int satn, const double epoch, const double xbstar, const double xecco, const double xargpo, const double xinclo, const double xmo, const double xno, const double xnodeo, <a class="el" href="structsgp4_1_1elsetrec.html">elsetrec</a> &amp;satrec)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#adee1a80d66854d4af45c2a24df69a594">sgp4</a> (<a class="el" href="namespacesgp4.html#a84be244094e484a8e83cc5dcb7b46e9e">gravconsttype</a> whichconst, <a class="el" href="structsgp4_1_1elsetrec.html">elsetrec</a> &amp;satrec, double tsince, double r[3], double v[3])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#a865dc3d18e20afacb5bdf13a1e3a21cc">gstime</a> (double jdut1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#a31d2ab9f0caa3186f2cf69282ceeb062">getgravconst</a> (<a class="el" href="namespacesgp4.html#a84be244094e484a8e83cc5dcb7b46e9e">gravconsttype</a> whichconst, double &amp;tumin, double &amp;mu, double &amp;radiusearthkm, double &amp;xke, double &amp;j2, double &amp;j3, double &amp;j4, double &amp;j3oj2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesgp4.html#ae96f1a3e9ef0450e3088d1d7632bc313">sgp4</a> (<a class="el" href="namespacesgp4.html#a84be244094e484a8e83cc5dcb7b46e9e">gravconsttype</a> whichconst, <a class="el" href="structsgp4_1_1elsetrec.html">elsetrec</a> &amp;satrec, double tsince, double r[], double v[])</td></tr>
</table>
<hr/><h2>型定義</h2>
<a class="anchor" id="ac1efaa98f6fc1ca026409b0ded1e2f54"></a><!-- doxytag: member="sgp4::elsetrec" ref="ac1efaa98f6fc1ca026409b0ded1e2f54" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structsgp4_1_1elsetrec.html">sgp4::elsetrec</a>  <a class="el" href="structsgp4_1_1elsetrec.html">sgp4::elsetrec</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>列挙型</h2>
<a class="anchor" id="a84be244094e484a8e83cc5dcb7b46e9e"></a><!-- doxytag: member="sgp4::gravconsttype" ref="a84be244094e484a8e83cc5dcb7b46e9e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="namespacesgp4.html#a84be244094e484a8e83cc5dcb7b46e9e">sgp4::gravconsttype</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>列挙型の値: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a84be244094e484a8e83cc5dcb7b46e9eada1c4cc7011593a9ddb004935f8001fd"></a><!-- doxytag: member="wgs72old" ref="a84be244094e484a8e83cc5dcb7b46e9eada1c4cc7011593a9ddb004935f8001fd" args="" -->wgs72old</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a84be244094e484a8e83cc5dcb7b46e9ea61278da3b464fd069a7e15add91bd2f1"></a><!-- doxytag: member="wgs72" ref="a84be244094e484a8e83cc5dcb7b46e9ea61278da3b464fd069a7e15add91bd2f1" args="" -->wgs72</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a84be244094e484a8e83cc5dcb7b46e9eaa032d1c92304c8ac7c3d596f2c5d15d3"></a><!-- doxytag: member="wgs84" ref="a84be244094e484a8e83cc5dcb7b46e9eaa032d1c92304c8ac7c3d596f2c5d15d3" args="" -->wgs84</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p> <a class="el" href="">sgp4unit.h</a> の <a class="el" href="#L54">54</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="namespacesgp4.html#a84be244094e484a8e83cc5dcb7b46e9eada1c4cc7011593a9ddb004935f8001fd">wgs72old</a>,
  <a class="code" href="namespacesgp4.html#a84be244094e484a8e83cc5dcb7b46e9ea61278da3b464fd069a7e15add91bd2f1">wgs72</a>,
  <a class="code" href="namespacesgp4.html#a84be244094e484a8e83cc5dcb7b46e9eaa032d1c92304c8ac7c3d596f2c5d15d3">wgs84</a>
} <a class="code" href="namespacesgp4.html#a84be244094e484a8e83cc5dcb7b46e9e">gravconsttype</a>;
</pre></div>
</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="a6ba0a1de0611eb0e0b7201933cc554d1"></a><!-- doxytag: member="sgp4::AcTan" ref="a6ba0a1de0611eb0e0b7201933cc554d1" args="(double sinx, double cosx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double sgp4::AcTan </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>sinx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>cosx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">sgp4ext.cpp</a> の <a class="el" href="#L96">96</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">{
        <span class="comment">/* Four-quadrant arctan function */</span>

        <span class="keywordflow">if</span> (cosx==0.0)
        {
                <span class="keywordflow">if</span> (sinx&gt;0.0)
                        <span class="keywordflow">return</span> (<a class="code" href="sgp4ext_8cpp.html#a51748a840c42f3194f8bd1f991b9a0ad">PIO2</a>);
                <span class="keywordflow">else</span>
                        <span class="keywordflow">return</span> (<a class="code" href="sgp4ext_8cpp.html#a8e02e78dce7db0de58dd3cbfe27da586">X3PIO2</a>);
        }

        <span class="keywordflow">else</span>
        {
                <span class="keywordflow">if</span> (cosx&gt;0.0)
                {
                        <span class="keywordflow">if</span> (sinx&gt;0.0)
                                <span class="keywordflow">return</span> (atan(sinx/cosx));
                        <span class="keywordflow">else</span>
                                <span class="keywordflow">return</span> (<a class="code" href="sgp4ext_8cpp.html#a4912c64aec0c943b7985db6cb61ff83a">TWOPI</a>+atan(sinx/cosx));
                }

                <span class="keywordflow">else</span>
                        <span class="keywordflow">return</span> (<a class="code" href="sgp4ext_8cpp.html#a598a3330b3c21701223ee0ca14316eca">PI</a>+atan(sinx/cosx));
        }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae9c168481b4b05275072b4feb66b423f"></a><!-- doxytag: member="sgp4::angle" ref="ae9c168481b4b05275072b4feb66b423f" args="(double vec1[3], double vec2[3])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double sgp4::angle </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>vec1</em>[3], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>vec2</em>[3]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">sgp4ext.cpp</a> の <a class="el" href="#L285">285</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">   {
     <span class="keywordtype">double</span> small, undefined, magv1, magv2, temp;
     small     = 0.00000001;
     undefined = 999999.1;

     magv1 = <a class="code" href="namespacesgp4.html#ab3dbec9b4b204d257df654a8f600b15b">mag</a>(vec1);
     magv2 = <a class="code" href="namespacesgp4.html#ab3dbec9b4b204d257df654a8f600b15b">mag</a>(vec2);

     <span class="keywordflow">if</span> (magv1*magv2 &gt; small*small)
       {
         temp= <a class="code" href="namespacesgp4.html#a0721aaf7c1f3a342afbd8d92b1492114">dot</a>(vec1, vec2) / (magv1*magv2);
         <span class="keywordflow">if</span> (fabs( temp ) &gt; 1.0)
             temp= <a class="code" href="namespacesgp4.html#a48f131e78fd7a4884cd66bc093c84bcb">sgn</a>(temp) * 1.0;
         <span class="keywordflow">return</span> acos( temp );
       }
       <span class="keywordflow">else</span>
         <span class="keywordflow">return</span> undefined;
   }  <span class="comment">// end angle</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a55168f7f6a78a3a0fa478d48607b8fbe"></a><!-- doxytag: member="sgp4::angle" ref="a55168f7f6a78a3a0fa478d48607b8fbe" args="(double[], double[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double sgp4::angle </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname">[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname">[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a56488bb8bf6bea188f1472a95f28ce6b"></a><!-- doxytag: member="sgp4::asinh" ref="a56488bb8bf6bea188f1472a95f28ce6b" args="(double xval)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double sgp4::asinh </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>xval</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">sgp4ext.cpp</a> の <a class="el" href="#L332">332</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">   {
     <span class="keywordflow">return</span> <a class="code" href="namespacestf_1_1util.html#aacd8f9eeac95bad7d1c75654c038c984">log</a>( xval + <a class="code" href="namespacestf_1_1util_1_1math.html#aaeb9c85b00f8c1afc33f9009e902e0d4" title="平方根を求める，cmathのラッパ．">sqrt</a>( xval*xval + 1.0 ) );
   }  <span class="comment">// end asinh</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a9c94818fe78bb21e99c4aed69a260b35"></a><!-- doxytag: member="sgp4::CalculateSolarPosition" ref="a9c94818fe78bb21e99c4aed69a260b35" args="(double jd, double *solar_vector)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sgp4::CalculateSolarPosition </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>jd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>solar_vector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">orbitutil.cpp</a> の <a class="el" href="#L157">157</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordtype">double</span> l, m, c, theta, epsi, t, r, nu, e;

        t = (jd-2415020)/36525;
        l = 279.69668 + 36000.76892 * t + 0.0003025 *t*t;
        m = 358.475833 + 35999.04975 * t - 0.00015 *t*t + 0.0000033 *t*t*t;
        c = ( (1.919460 - 0.004789 * t - 0.000014 *t*t) * sin(m*<a class="code" href="orbitutil_8cpp.html#af7e8592d0a634bd3642e9fd508ea8022">DEG2RAD</a>)
                + (0.020094 - 0.0001 *t) * sin(2*m*DEG2RAD) + 0.000293 * sin(3*m*DEG2RAD) );
        theta = l + c - 0.00556 - 0.00479*sin((259.18-1934.142*t)*DEG2RAD);
        epsi = 23.452294 - 0.0130125*t - 0.00000164*t*t - 0.000000503*t*t*t + 0.00256*cos((259.18-1934.142*t)*DEG2RAD);

        e = 0.01675104 - 0.0000418*t - 0.000000126*t*t;
        nu = m+c;
        r = 1.00000023 * (1-e*e) / (1+ e*cos(nu*DEG2RAD));
        r *= <a class="code" href="orbitutil_8cpp.html#ae992e5b7e1e6bc540e74aa4d3f63a269">AU</a>;

        solar_vector[0]=r*cos(theta*DEG2RAD);
        solar_vector[1]=r*sin(theta*DEG2RAD)*cos(epsi*DEG2RAD);
        solar_vector[2]=r*sin(theta*DEG2RAD)*sin(epsi*DEG2RAD);

}
</pre></div>
</div>
</div>
<a class="anchor" id="a852eb1c1452abb02fa71638c9e4e3090"></a><!-- doxytag: member="sgp4::cross" ref="a852eb1c1452abb02fa71638c9e4e3090" args="(double[], double[], double[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sgp4::cross </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname">[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname">[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname">[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a546c8595c160d44e5e994a3a9e45d85c"></a><!-- doxytag: member="sgp4::cross" ref="a546c8595c160d44e5e994a3a9e45d85c" args="(double vec1[3], double vec2[3], double outvec[3])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sgp4::cross </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>vec1</em>[3], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>vec2</em>[3], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>outvec</em>[3]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">sgp4ext.cpp</a> の <a class="el" href="#L218">218</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">   {
     outvec[0]= vec1[1]*vec2[2] - vec1[2]*vec2[1];
     outvec[1]= vec1[2]*vec2[0] - vec1[0]*vec2[2];
     outvec[2]= vec1[0]*vec2[1] - vec1[1]*vec2[0];
   }  <span class="comment">// end cross</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a4650c9e8c59a3a79421c9112b68cce74"></a><!-- doxytag: member="sgp4::days2mdhms" ref="a4650c9e8c59a3a79421c9112b68cce74" args="(int year, double days, int &amp;mon, int &amp;day, int &amp;hr, int &amp;minute, double &amp;sec)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sgp4::days2mdhms </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>year</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>days</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>mon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>day</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>hr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>minute</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>sec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">sgp4ext.cpp</a> の <a class="el" href="#L747">747</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">   {
     <span class="keywordtype">int</span> i, inttemp, dayofyr;
     <span class="keywordtype">double</span>    temp;
     <span class="keywordtype">int</span> lmonth[] = {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};

     dayofyr = (int)floor(days);
     <span class="comment">/* ----------------- find month and day of month ---------------- */</span>
     <span class="keywordflow">if</span> ( (year % 4) == 0 )
       lmonth[1] = 29;

     i = 1;
     inttemp = 0;
     <span class="keywordflow">while</span> ((dayofyr &gt; inttemp + lmonth[i-1]) &amp;&amp; (i &lt; 12))
     {
       inttemp = inttemp + lmonth[i-1];
       i++;
     }
     mon = i;
     day = dayofyr - inttemp;

     <span class="comment">/* ----------------- find hours minutes and seconds ------------- */</span>
     temp = (days - dayofyr) * 24.0;
     hr   = (int)floor(temp);
     temp = (temp - hr) * 60.0;
     minute  = (int)floor(temp);
     sec  = (temp - minute) * 60.0;
   }  <span class="comment">// end days2mdhms</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a0721aaf7c1f3a342afbd8d92b1492114"></a><!-- doxytag: member="sgp4::dot" ref="a0721aaf7c1f3a342afbd8d92b1492114" args="(double x[3], double y[3])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double sgp4::dot </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>x</em>[3], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>y</em>[3]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">sgp4ext.cpp</a> の <a class="el" href="#L253">253</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">   {
     <span class="keywordflow">return</span> (x[0]*<a class="code" href="namespaceigrf.html#aef378991c40e0acdd01f61c2ef7d3976">y</a>[0] + x[1]*<a class="code" href="namespaceigrf.html#aef378991c40e0acdd01f61c2ef7d3976">y</a>[1] + x[2]*<a class="code" href="namespaceigrf.html#aef378991c40e0acdd01f61c2ef7d3976">y</a>[2]);
   }  <span class="comment">// end dot</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a842a3e2b50466c8e373eacbf10f736fb"></a><!-- doxytag: member="sgp4::dot" ref="a842a3e2b50466c8e373eacbf10f736fb" args="(double[], double[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double sgp4::dot </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname">[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname">[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad494013e1053a9198a9bd832ae274968"></a><!-- doxytag: member="sgp4::FMod2p" ref="ad494013e1053a9198a9bd832ae274968" args="(double x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double sgp4::FMod2p </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">sgp4ext.cpp</a> の <a class="el" href="#L124">124</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">{
        <span class="comment">/* Returns mod 2PI of argument */</span>

        <span class="keywordtype">int</span> i;
        <span class="keywordtype">double</span> ret_val;

        ret_val=x;
        i=ret_val/<a class="code" href="sgp4ext_8cpp.html#a4912c64aec0c943b7985db6cb61ff83a">TWOPI</a>;
        ret_val-=i*<a class="code" href="sgp4ext_8cpp.html#a4912c64aec0c943b7985db6cb61ff83a">TWOPI</a>;

        <span class="keywordflow">if</span> (ret_val&lt;0.0)
                ret_val+=<a class="code" href="sgp4ext_8cpp.html#a4912c64aec0c943b7985db6cb61ff83a">TWOPI</a>;

        <span class="keywordflow">return</span> ret_val;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a31d2ab9f0caa3186f2cf69282ceeb062"></a><!-- doxytag: member="sgp4::getgravconst" ref="a31d2ab9f0caa3186f2cf69282ceeb062" args="(gravconsttype whichconst, double &amp;tumin, double &amp;mu, double &amp;radiusearthkm, double &amp;xke, double &amp;j2, double &amp;j3, double &amp;j4, double &amp;j3oj2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sgp4::getgravconst </td>
          <td>(</td>
          <td class="paramtype">gravconsttype&#160;</td>
          <td class="paramname"><em>whichconst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>tumin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>mu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>radiusearthkm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>xke</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>j2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>j3</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>j4</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>j3oj2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">sgp4unit.cpp</a> の <a class="el" href="#L2067">2067</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">     {

       <span class="keywordflow">switch</span> (whichconst)
         {
           <span class="comment">// -- wgs-72 low precision str#3 constants --</span>
           <span class="keywordflow">case</span> <a class="code" href="namespacesgp4.html#a84be244094e484a8e83cc5dcb7b46e9eada1c4cc7011593a9ddb004935f8001fd">wgs72old</a>:
           mu     = 398600.79964;        <span class="comment">// in km3 / s2</span>
           radiusearthkm = 6378.135;     <span class="comment">// km</span>
           xke    = 0.0743669161;
           tumin  = 1.0 / xke;
           j2     =   0.001082616;
           j3     =  -0.00000253881;
           j4     =  -0.00000165597;
           j3oj2  =  j3 / j2;
         <span class="keywordflow">break</span>;
           <span class="comment">// ------------ wgs-72 constants ------------</span>
           <span class="keywordflow">case</span> <a class="code" href="namespacesgp4.html#a84be244094e484a8e83cc5dcb7b46e9ea61278da3b464fd069a7e15add91bd2f1">wgs72</a>:
           mu     = 398600.8;            <span class="comment">// in km3 / s2</span>
           radiusearthkm = 6378.135;     <span class="comment">// km</span>
           xke    = 60.0 / <a class="code" href="namespacestf_1_1util_1_1math.html#aaeb9c85b00f8c1afc33f9009e902e0d4" title="平方根を求める，cmathのラッパ．">sqrt</a>(radiusearthkm*radiusearthkm*radiusearthkm/mu);
           tumin  = 1.0 / xke;
           j2     =   0.001082616;
           j3     =  -0.00000253881;
           j4     =  -0.00000165597;
           j3oj2  =  j3 / j2;
         <span class="keywordflow">break</span>;
           <span class="keywordflow">case</span> <a class="code" href="namespacesgp4.html#a84be244094e484a8e83cc5dcb7b46e9eaa032d1c92304c8ac7c3d596f2c5d15d3">wgs84</a>:
           <span class="comment">// ------------ wgs-84 constants ------------</span>
           mu     = 398600.5;            <span class="comment">// in km3 / s2</span>
           radiusearthkm = 6378.137;     <span class="comment">// km</span>
           xke    = 60.0 / <a class="code" href="namespacestf_1_1util_1_1math.html#aaeb9c85b00f8c1afc33f9009e902e0d4" title="平方根を求める，cmathのラッパ．">sqrt</a>(radiusearthkm*radiusearthkm*radiusearthkm/mu);
           tumin  = 1.0 / xke;
           j2     =   0.00108262998905;
           j3     =  -0.00000253215306;
           j4     =  -0.00000161098761;
           j3oj2  =  j3 / j2;
         <span class="keywordflow">break</span>;
         <span class="keywordflow">default</span>:
           fprintf(stderr, <span class="stringliteral">&quot;unknown gravity option (%d)\n&quot;</span>, whichconst);
         <span class="keywordflow">break</span>;
         }

     }   <span class="comment">// end getgravconst</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a865dc3d18e20afacb5bdf13a1e3a21cc"></a><!-- doxytag: member="sgp4::gstime" ref="a865dc3d18e20afacb5bdf13a1e3a21cc" args="(double jdut1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double sgp4::gstime </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>jdut1</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">sgp4unit.cpp</a> の <a class="el" href="#L2004">2004</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">   {
     <span class="keyword">const</span> <span class="keywordtype">double</span> twopi = 2.0 * <a class="code" href="sgp4unit_8cpp.html#a1daf785e3f68d293c7caa1c756d5cb74">pi</a>;
     <span class="keyword">const</span> <span class="keywordtype">double</span> deg2rad = <a class="code" href="sgp4unit_8cpp.html#a1daf785e3f68d293c7caa1c756d5cb74">pi</a> / 180.0;
     <span class="keywordtype">double</span>       temp, tut1;

     tut1 = (jdut1 - 2451545.0) / 36525.0;
     temp = -6.2e-6* tut1 * tut1 * tut1 + 0.093104 * tut1 * tut1 +
             (876600.0*3600 + 8640184.812866) * tut1 + 67310.54841;  <span class="comment">// sec</span>
     temp = fmod(temp * deg2rad / 240.0, twopi); <span class="comment">//360/86400 = 1/240, to deg, to rad</span>

     <span class="comment">// ------------------------ check quadrants ---------------------</span>
     <span class="keywordflow">if</span> (temp &lt; 0.0)
         temp += twopi;

<span class="comment">/*</span>
<span class="comment">//debug用</span>
<span class="comment">        int temp1, temp2;</span>
<span class="comment">        double temp3;</span>
<span class="comment">        temp1 = (int)(temp*180/pi/15);</span>
<span class="comment">        temp2 = (int)((temp*180/pi/15-temp1)*60);</span>
<span class="comment">        temp3 = (((temp*180/pi/15-temp1)*60)-temp2)*60;</span>
<span class="comment">        std::cout &lt;&lt; &quot;グリニッジ平均恒星時gstime &quot; &lt;&lt; temp1 &lt;&lt; &quot;h&quot; &lt;&lt; temp2 &lt;&lt;  &quot;m&quot; &lt;&lt; temp3 &lt;&lt; &quot;s&quot; &lt;&lt; std::endl;</span>
<span class="comment">*/</span>

        <span class="keywordflow">return</span> temp;
   }  <span class="comment">// end gstime</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a93d1353845a69e2545718525df9b500b"></a><!-- doxytag: member="sgp4::invjday" ref="a93d1353845a69e2545718525df9b500b" args="(double jd, int &amp;year, int &amp;mon, int &amp;day, int &amp;hr, int &amp;minute, double &amp;sec)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sgp4::invjday </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>jd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>year</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>mon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>day</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>hr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>minute</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>sec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">sgp4ext.cpp</a> の <a class="el" href="#L822">822</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">   {
     <span class="keywordtype">int</span> leapyrs;
     <span class="keywordtype">double</span>    days, tu, temp;

     <span class="comment">/* --------------- find year and days of the year --------------- */</span>
     temp    = jd - 2415019.5;
     tu      = temp / 365.25;
     year    = 1900 + (int)floor(tu);
     leapyrs = (int)floor((year - 1901) * 0.25);

     <span class="comment">// optional nudge by 8.64x10-7 sec to get even outputs</span>
     days    = temp - ((year - 1900) * 365.0 + leapyrs) + 0.00000000001;

     <span class="comment">/* ------------ check for case of beginning of a year ----------- */</span>
     <span class="keywordflow">if</span> (days &lt; 1.0)
       {
         year    = year - 1;
         leapyrs = (int)floor((year - 1901) * 0.25);
         days    = temp - ((year - 1900) * 365.0 + leapyrs);
       }

     <span class="comment">/* ----------------- find remaing data  ------------------------- */</span>
     <a class="code" href="namespacesgp4.html#a4650c9e8c59a3a79421c9112b68cce74">days2mdhms</a>(year, days, mon, day, hr, minute, sec);
     sec = sec - 0.00000086400;
   }  <span class="comment">// end invjday</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a68d086bce456f80fbde1e96b5a5a1d90"></a><!-- doxytag: member="sgp4::jday" ref="a68d086bce456f80fbde1e96b5a5a1d90" args="(int year, int mon, int day, int hr, int minute, double sec, double &amp;jd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sgp4::jday </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>year</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>day</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>hr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>minute</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>sec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>jd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">sgp4ext.cpp</a> の <a class="el" href="#L694">694</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">   {
     jd = 367.0 * year -
          floor((7 * (year + floor((mon + 9) / 12.0))) * 0.25) +
          floor( 275 * mon / 9.0 ) +
          day + 1721013.5 +
          ((sec / 60.0 + minute) / 60.0 + hr) / 24.0;  <span class="comment">// ut in days</span>
          <span class="comment">// - 0.5*sgn(100.0*year + mon - 190002.5) + 0.5;</span>
   }  <span class="comment">// end jday</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a419dfa07666feea28b59f5959414bb1e"></a><!-- doxytag: member="sgp4::JdToDecyear" ref="a419dfa07666feea28b59f5959414bb1e" args="(double jd, double *decyear)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sgp4::JdToDecyear </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>jd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>decyear</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">sgp4ext.cpp</a> の <a class="el" href="#L856">856</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">   {
     <span class="keywordtype">int</span> leapyrs, year;
     <span class="keywordtype">double</span>    days, tu, temp;

     <span class="comment">/* --------------- find year and days of the year --------------- */</span>
     temp    = jd - 2415019.5;
     tu      = temp / 365.25;
     year    = 1900 + (int)floor(tu);
     leapyrs = (int)floor((year - 1901) * 0.25);

     <span class="comment">// optional nudge by 8.64x10-7 sec to get even outputs</span>
     days    = temp - ((year - 1900) * 365.0 + leapyrs) + 0.00000000001;

     <span class="comment">/* ------------ check for case of beginning of a year ----------- */</span>
     <span class="keywordflow">if</span> (days &lt; 1.0)
       {
         year    = year - 1;
         leapyrs = (int)floor((year - 1901) * 0.25);
         days    = temp - ((year - 1900) * 365.0 + leapyrs);
       }

         *decyear = year + days/365.25;
   }  <span class="comment">// end JdToDecyear</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a57cb684c890eaa1ac2fbdfab2b904652"></a><!-- doxytag: member="sgp4::juldayTEST" ref="a57cb684c890eaa1ac2fbdfab2b904652" args="(int, int, int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float sgp4::juldayTEST </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="afd3a32833e92812cbbd04dfbb1800071"></a><!-- doxytag: member="sgp4::mag" ref="afd3a32833e92812cbbd04dfbb1800071" args="(double[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double sgp4::mag </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname">[]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab3dbec9b4b204d257df654a8f600b15b"></a><!-- doxytag: member="sgp4::mag" ref="ab3dbec9b4b204d257df654a8f600b15b" args="(double x[3])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double sgp4::mag </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>x</em>[3]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">sgp4ext.cpp</a> の <a class="el" href="#L188">188</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">   {
     <span class="keywordflow">return</span> <a class="code" href="namespacestf_1_1util_1_1math.html#aaeb9c85b00f8c1afc33f9009e902e0d4" title="平方根を求める，cmathのラッパ．">sqrt</a>(x[0]*x[0] + x[1]*x[1] + x[2]*x[2]);
   }  <span class="comment">// end mag</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a63774ae5d016cd3990eb1734f5eee90d"></a><!-- doxytag: member="sgp4::newtonnu" ref="a63774ae5d016cd3990eb1734f5eee90d" args="(double ecc, double nu, double &amp;e0, double &amp;m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sgp4::newtonnu </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>ecc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>nu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>e0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">sgp4ext.cpp</a> の <a class="el" href="#L378">378</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">     {
       <span class="keywordtype">double</span> small, sine, cose;

     <span class="comment">// ---------------------  implementation   ---------------------</span>
     e0= 999999.9;
     m = 999999.9;
     small = 0.00000001;

     <span class="comment">// --------------------------- circular ------------------------</span>
     <span class="keywordflow">if</span> ( fabs( ecc ) &lt; small  )
       {
         m = nu;
         e0= nu;
       }
       <span class="keywordflow">else</span>
         <span class="comment">// ---------------------- elliptical -----------------------</span>
         <span class="keywordflow">if</span> ( ecc &lt; 1.0-small  )
           {
             sine= ( <a class="code" href="namespacestf_1_1util_1_1math.html#aaeb9c85b00f8c1afc33f9009e902e0d4" title="平方根を求める，cmathのラッパ．">sqrt</a>( 1.0 -ecc*ecc ) * sin(nu) ) / ( 1.0 +ecc*cos(nu) );
             cose= ( ecc + cos(nu) ) / ( 1.0  + ecc*cos(nu) );
             e0  = atan2( sine, cose );
             m   = e0 - ecc*sin(e0);
           }
           <span class="keywordflow">else</span>
             <span class="comment">// -------------------- hyperbolic  --------------------</span>
             <span class="keywordflow">if</span> ( ecc &gt; 1.0 + small  )
               {
                 <span class="keywordflow">if</span> ((ecc &gt; 1.0 ) &amp;&amp; (fabs(nu)+0.00001 &lt; <a class="code" href="sgp4ext_8cpp.html#a1daf785e3f68d293c7caa1c756d5cb74">pi</a>-acos(1.0 /ecc)))
                   {
                     sine= ( <a class="code" href="namespacestf_1_1util_1_1math.html#aaeb9c85b00f8c1afc33f9009e902e0d4" title="平方根を求める，cmathのラッパ．">sqrt</a>( ecc*ecc-1.0  ) * sin(nu) ) / ( 1.0  + ecc*cos(nu) );
                     e0  = <a class="code" href="namespacesgp4.html#a56488bb8bf6bea188f1472a95f28ce6b">asinh</a>( sine );
                     m   = ecc*sinh(e0) - e0;
                   }
                }
               <span class="keywordflow">else</span>
                 <span class="comment">// ----------------- parabolic ---------------------</span>
                 <span class="keywordflow">if</span> ( fabs(nu) &lt; 168.0*<a class="code" href="sgp4ext_8cpp.html#a1daf785e3f68d293c7caa1c756d5cb74">pi</a>/180.0  )
                   {
                     e0= tan( nu*0.5  );
                     m = e0 + (e0*e0*e0)/3.0;
                   }

     <span class="keywordflow">if</span> ( ecc &lt; 1.0  )
       {
         m = fmod( m, 2.0 *<a class="code" href="sgp4ext_8cpp.html#a1daf785e3f68d293c7caa1c756d5cb74">pi</a> );
         <span class="keywordflow">if</span> ( m &lt; 0.0  )
             m = m + 2.0 *<a class="code" href="sgp4ext_8cpp.html#a1daf785e3f68d293c7caa1c756d5cb74">pi</a>;
         e0 = fmod( e0, 2.0 *<a class="code" href="sgp4ext_8cpp.html#a1daf785e3f68d293c7caa1c756d5cb74">pi</a> );
       }
   }  <span class="comment">// end newtonnu</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a170fbd9d334b25983469ed488ab42a5f"></a><!-- doxytag: member="sgp4::RotationX" ref="a170fbd9d334b25983469ed488ab42a5f" args="(const double *bfr, double *aft, double theta)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sgp4::RotationX </td>
          <td>(</td>
          <td class="paramtype">const double *&#160;</td>
          <td class="paramname"><em>bfr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>aft</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>theta</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">sgp4ext.cpp</a> の <a class="el" href="#L46">46</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordtype">double</span> temp[3];

        temp[0] = bfr[0];
        temp[1] = cos(theta)*bfr[1] + sin(theta)*bfr[2]; 
        temp[2] = -sin(theta)*bfr[1] + cos(theta)*bfr[2];

        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;3;i++) {
                aft[i] = temp[i];
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad01ceb467c3d61ff41dc8284b062c29f"></a><!-- doxytag: member="sgp4::RotationY" ref="ad01ceb467c3d61ff41dc8284b062c29f" args="(const double *bfr, double *aft, double theta)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sgp4::RotationY </td>
          <td>(</td>
          <td class="paramtype">const double *&#160;</td>
          <td class="paramname"><em>bfr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>aft</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>theta</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">sgp4ext.cpp</a> の <a class="el" href="#L63">63</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordtype">double</span> temp[3];

        temp[0] = cos(theta)*bfr[0] - sin(theta)*bfr[2];
        temp[1] = bfr[1]; 
        temp[2] = sin(theta)*bfr[0] + cos(theta)*bfr[2];

        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;3;i++) {
                aft[i] = temp[i];
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7d8c97a0bbbff0e1ab6789977455fb65"></a><!-- doxytag: member="sgp4::RotationZ" ref="a7d8c97a0bbbff0e1ab6789977455fb65" args="(const double *bfr, double *aft, double theta)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sgp4::RotationZ </td>
          <td>(</td>
          <td class="paramtype">const double *&#160;</td>
          <td class="paramname"><em>bfr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>aft</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>theta</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">sgp4ext.cpp</a> の <a class="el" href="#L80">80</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordtype">double</span> temp[3];

        temp[0] = cos(theta)*bfr[0] + sin(theta)*bfr[1];
        temp[1] = -sin(theta)*bfr[0] + cos(theta)*bfr[1]; 
        temp[2] = bfr[2];

        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;3;i++) {
                aft[i] = temp[i];
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3a7caa6f07a4fabd5ae23f734672a4f5"></a><!-- doxytag: member="sgp4::rv2coe" ref="a3a7caa6f07a4fabd5ae23f734672a4f5" args="(double r[3], double v[3], double mu, double &amp;p, double &amp;a, double &amp;ecc, double &amp;incl, double &amp;omega, double &amp;argp, double &amp;nu, double &amp;m, double &amp;arglat, double &amp;truelon, double &amp;lonper)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sgp4::rv2coe </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>r</em>[3], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>v</em>[3], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>mu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>ecc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>incl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>omega</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>argp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>nu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>arglat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>truelon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>lonper</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">sgp4ext.cpp</a> の <a class="el" href="#L493">493</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">     {
       <span class="keywordtype">double</span> undefined, small, hbar[3], nbar[3], magr, magv, magn, ebar[3], sme,
              rdotv, infinite, temp, c1, hk, twopi, magh, halfpi, e;

       <span class="keywordtype">int</span> i;
       <span class="keywordtype">char</span> typeorbit[3];

     twopi  = 2.0 * <a class="code" href="sgp4ext_8cpp.html#a1daf785e3f68d293c7caa1c756d5cb74">pi</a>;
     halfpi = 0.5 * <a class="code" href="sgp4ext_8cpp.html#a1daf785e3f68d293c7caa1c756d5cb74">pi</a>;
     small  = 0.00000001;
     undefined = 999999.1;
     infinite  = 999999.9;

     <span class="comment">// -------------------------  implementation   -----------------</span>
     magr = <a class="code" href="namespacesgp4.html#ab3dbec9b4b204d257df654a8f600b15b">mag</a>( r );
     magv = <a class="code" href="namespacesgp4.html#ab3dbec9b4b204d257df654a8f600b15b">mag</a>( <a class="code" href="namespacestf.html#afa89a4a0c80d3727c2f396aa3ead41cd">v</a> );

     <span class="comment">// ------------------  find h n and e vectors   ----------------</span>
     <a class="code" href="namespacesgp4.html#a546c8595c160d44e5e994a3a9e45d85c">cross</a>( r, <a class="code" href="namespacestf.html#afa89a4a0c80d3727c2f396aa3ead41cd">v</a>, hbar );
     magh = <a class="code" href="namespacesgp4.html#ab3dbec9b4b204d257df654a8f600b15b">mag</a>( hbar );
     <span class="keywordflow">if</span> ( magh &gt; small )
       {
         nbar[0]= -hbar[1];
         nbar[1]=  hbar[0];
         nbar[2]=   0.0;
         magn = <a class="code" href="namespacesgp4.html#ab3dbec9b4b204d257df654a8f600b15b">mag</a>( nbar );
         c1 = magv*magv - mu /magr;
         rdotv = <a class="code" href="namespacesgp4.html#a0721aaf7c1f3a342afbd8d92b1492114">dot</a>( r, <a class="code" href="namespacestf.html#afa89a4a0c80d3727c2f396aa3ead41cd">v</a> );
         <span class="keywordflow">for</span> (i= 0; i &lt;= 2; i++)
             ebar[i]= (c1*r[i] - rdotv*<a class="code" href="namespacestf.html#afa89a4a0c80d3727c2f396aa3ead41cd">v</a>[i])/mu;
         ecc = <a class="code" href="namespacesgp4.html#ab3dbec9b4b204d257df654a8f600b15b">mag</a>( ebar );

         <span class="comment">// ------------  find a e and semi-latus rectum   ----------</span>
         sme= ( magv*magv*0.5  ) - ( mu /magr );
         <span class="keywordflow">if</span> ( fabs( sme ) &gt; small )
             a= -mu  / (2.0 *sme);
           <span class="keywordflow">else</span>
             a= infinite;
         <a class="code" href="namespaceigrf.html#a9b0d3a2208a4bd2bf3982ee85d905d5a">p</a> = magh*magh/mu;

         <span class="comment">// -----------------  find inclination   -------------------</span>
         hk= hbar[2]/magh;
         incl= acos( hk );

         <span class="comment">// --------  determine type of orbit for later use  --------</span>
         <span class="comment">// ------ elliptical, parabolic, hyperbolic inclined -------</span>
         strcpy(typeorbit, <span class="stringliteral">&quot;ei&quot;</span>);
         <span class="keywordflow">if</span> ( ecc &lt; small )
           {
             <span class="comment">// ----------------  circular equatorial ---------------</span>
             <span class="keywordflow">if</span>  ((incl&lt;small) | (fabs(incl-<a class="code" href="sgp4ext_8cpp.html#a1daf785e3f68d293c7caa1c756d5cb74">pi</a>)&lt;small))
                 strcpy(typeorbit, <span class="stringliteral">&quot;ce&quot;</span>);
               <span class="keywordflow">else</span>
                 <span class="comment">// --------------  circular inclined ---------------</span>
                 strcpy(typeorbit, <span class="stringliteral">&quot;ci&quot;</span>);
           }
           <span class="keywordflow">else</span>
           {
             <span class="comment">// - elliptical, parabolic, hyperbolic equatorial --</span>
             <span class="keywordflow">if</span>  ((incl&lt;small) | (fabs(incl-<a class="code" href="sgp4ext_8cpp.html#a1daf785e3f68d293c7caa1c756d5cb74">pi</a>)&lt;small))
                 strcpy(typeorbit, <span class="stringliteral">&quot;ee&quot;</span>);
           }

         <span class="comment">// ----------  find longitude of ascending node ------------</span>
         <span class="keywordflow">if</span> ( magn &gt; small )
           {
             temp= nbar[0] / magn;
             <span class="keywordflow">if</span> ( fabs(temp) &gt; 1.0  )
                 temp= <a class="code" href="namespacesgp4.html#a48f131e78fd7a4884cd66bc093c84bcb">sgn</a>(temp);
             omega= acos( temp );
             <span class="keywordflow">if</span> ( nbar[1] &lt; 0.0  )
                 omega= twopi - omega;
           }
           <span class="keywordflow">else</span>
             omega= undefined;

         <span class="comment">// ---------------- find argument of perigee ---------------</span>
         <span class="keywordflow">if</span> ( strcmp(typeorbit, <span class="stringliteral">&quot;ei&quot;</span>) == 0 )
           {
             argp = <a class="code" href="namespacesgp4.html#ae9c168481b4b05275072b4feb66b423f">angle</a>( nbar, ebar);
             <span class="keywordflow">if</span> ( ebar[2] &lt; 0.0  )
                 argp= twopi - argp;
           }
           <span class="keywordflow">else</span>
             argp= undefined;

         <span class="comment">// ------------  find true anomaly at epoch    -------------</span>
         <span class="keywordflow">if</span> ( typeorbit[0] == <span class="charliteral">&#39;e&#39;</span> )
           {
             nu =  <a class="code" href="namespacesgp4.html#ae9c168481b4b05275072b4feb66b423f">angle</a>( ebar, r);
             <span class="keywordflow">if</span> ( rdotv &lt; 0.0  )
                 nu= twopi - nu;
           }
           <span class="keywordflow">else</span>
             nu= undefined;

         <span class="comment">// ----  find argument of latitude - circular inclined -----</span>
                 <span class="comment">//緯度の計算（円の/傾斜面の)</span>
         <span class="keywordflow">if</span> ( strcmp(typeorbit, <span class="stringliteral">&quot;ci&quot;</span>) == 0 )
           {
             arglat = <a class="code" href="namespacesgp4.html#ae9c168481b4b05275072b4feb66b423f">angle</a>( nbar, r );
             <span class="keywordflow">if</span> ( r[2] &lt; 0.0  )
                 arglat= twopi - arglat;
             m = arglat;
           }
           <span class="keywordflow">else</span>
             arglat= undefined;

         <span class="comment">// -- find longitude of perigee - elliptical equatorial ----</span>
         <span class="keywordflow">if</span>  (( ecc&gt;small ) &amp;&amp; (strcmp(typeorbit, <span class="stringliteral">&quot;ee&quot;</span>) == 0))
           {
             temp= ebar[0]/ecc;
             <span class="keywordflow">if</span> ( fabs(temp) &gt; 1.0  )
                 temp= <a class="code" href="namespacesgp4.html#a48f131e78fd7a4884cd66bc093c84bcb">sgn</a>(temp);
             lonper= acos( temp );
             <span class="keywordflow">if</span> ( ebar[1] &lt; 0.0  )
                 lonper= twopi - lonper;
             <span class="keywordflow">if</span> ( incl &gt; halfpi )
                 lonper= twopi - lonper;
           }
           <span class="keywordflow">else</span>
             lonper= undefined;

         <span class="comment">// -------- find true longitude - circular equatorial ------</span>
                 <span class="comment">//真の経度の計算(円の/赤道の)</span>
         <span class="keywordflow">if</span>  (( magr&gt;small ) &amp;&amp; ( strcmp(typeorbit, <span class="stringliteral">&quot;ce&quot;</span>) == 0 ))
           {
             temp= r[0]/magr;
             <span class="keywordflow">if</span> ( fabs(temp) &gt; 1.0  )
                 temp= <a class="code" href="namespacesgp4.html#a48f131e78fd7a4884cd66bc093c84bcb">sgn</a>(temp);       <span class="comment">//sgn()は符号関数</span>
             truelon= acos( temp );
             <span class="keywordflow">if</span> ( r[1] &lt; 0.0  )
                 truelon= twopi - truelon;
             <span class="keywordflow">if</span> ( incl &gt; halfpi )
                 truelon= twopi - truelon;
             m = truelon;
           }
           <span class="keywordflow">else</span>
             truelon= undefined;

         <span class="comment">// ------------ find mean anomaly for all orbits -----------</span>
         <span class="keywordflow">if</span> ( typeorbit[0] == <span class="charliteral">&#39;e&#39;</span> )
             <a class="code" href="namespacesgp4.html#a63774ae5d016cd3990eb1734f5eee90d">newtonnu</a>(ecc, nu,  e, m);
     }
      <span class="keywordflow">else</span>
     {
        <a class="code" href="namespaceigrf.html#a9b0d3a2208a4bd2bf3982ee85d905d5a">p</a>    = undefined;
        a    = undefined;
        ecc  = undefined;
        incl = undefined;
        omega= undefined;
        argp = undefined;
        nu   = undefined;
        m    = undefined;
        arglat = undefined;
        truelon= undefined;
        lonper = undefined;
     }
   }  <span class="comment">// end rv2coe</span>
</pre></div>
</div>
</div>
<a class="anchor" id="aa1d263cd64e9084440e2dd17a089507f"></a><!-- doxytag: member="sgp4::rv2coe" ref="aa1d263cd64e9084440e2dd17a089507f" args="(double[], double[], double, double &amp;, double &amp;, double &amp;, double &amp;, double &amp;, double &amp;, double &amp;, double &amp;, double &amp;, double &amp;, double &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sgp4::rv2coe </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname">[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname">[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a4d08f7868fb59bf558b072f0cc7d415d"></a><!-- doxytag: member="sgp4::SatEclipsed" ref="a4d08f7868fb59bf558b072f0cc7d415d" args="(double *pos, double *sol, double *depth)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sgp4::SatEclipsed </td>
          <td>(</td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>sol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>depth</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="adf826ad7de34c5831d6cc9ee1757d7b1"></a><!-- doxytag: member="sgp4::SatEclipsed" ref="adf826ad7de34c5831d6cc9ee1757d7b1" args="(double *pos, double *sol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sgp4::SatEclipsed </td>
          <td>(</td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>sol</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">orbitutil.cpp</a> の <a class="el" href="#L185">185</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">{
        <span class="comment">/* Calculates stellite&#39;s eclipse status and depth */</span>

        <span class="keywordtype">double</span> sd_sun, sd_earth, delta, depth;
        <span class="keywordtype">double</span> Rho[3], earth[3];

        <span class="comment">/* Determine partial eclipse */</span>
        sd_earth=asin(<a class="code" href="orbitutil_8cpp.html#a90005b838a7bf67ae53ade3ed4f8c01f">XKMPER</a>/<a class="code" href="namespacesgp4.html#ab3dbec9b4b204d257df654a8f600b15b">mag</a>(pos));
        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;3;i++) {
                Rho[i] = sol[i]-pos[i];
        }

        sd_sun=asin(<a class="code" href="orbitutil_8cpp.html#a735fd180f3bfcca3f2422b1c5e2a3019">RSUN</a>/<a class="code" href="namespacesgp4.html#ab3dbec9b4b204d257df654a8f600b15b">mag</a>(Rho));
        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;3;i++) {
                earth[i] = -1.0 * pos[i];
        }
        delta=<a class="code" href="namespacesgp4.html#ae9c168481b4b05275072b4feb66b423f">angle</a>(sol, earth);

        depth=sd_earth - sd_sun - delta;

        <span class="keywordflow">if</span> (sd_earth&lt;sd_sun)
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
        <span class="keywordflow">else</span>
                <span class="keywordflow">if</span> (depth&gt;=0)
                        <span class="keywordflow">return</span> <span class="keyword">true</span>;
                <span class="keywordflow">else</span>
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a48f131e78fd7a4884cd66bc093c84bcb"></a><!-- doxytag: member="sgp4::sgn" ref="a48f131e78fd7a4884cd66bc093c84bcb" args="(double x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double sgp4::sgn </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">sgp4ext.cpp</a> の <a class="el" href="#L148">148</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">   {
     <span class="keywordflow">if</span> (x &lt; 1.0)
       {
          <span class="keywordflow">return</span> -1;
       }
       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (x &gt; 1.0)
       {
          <span class="keywordflow">return</span> 1;
       }

    <span class="keywordflow">return</span> 0.0;

   }  <span class="comment">// end sgn</span>
</pre></div>
</div>
</div>
<a class="anchor" id="adee1a80d66854d4af45c2a24df69a594"></a><!-- doxytag: member="sgp4::sgp4" ref="adee1a80d66854d4af45c2a24df69a594" args="(gravconsttype whichconst, elsetrec &amp;satrec, double tsince, double r[3], double v[3])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sgp4::sgp4 </td>
          <td>(</td>
          <td class="paramtype">gravconsttype&#160;</td>
          <td class="paramname"><em>whichconst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">elsetrec &amp;&#160;</td>
          <td class="paramname"><em>satrec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>tsince</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>r</em>[3], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>v</em>[3]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">sgp4unit.cpp</a> の <a class="el" href="#L1700">1700</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">{
     <span class="keywordtype">double</span> am   , axnl  , aynl , betal ,  cosim , cnod  ,
         cos2u, coseo1, cosi , cosip ,  cosisq, cossu , cosu,
         delm , delomg, em   , emsq  ,  ecose , el2   , eo1 ,
         ep   , esine , argpm, argpp ,  argpdf, pl,     mrt = 0.0,
         mvt  , rdotl , rl   , rvdot ,  rvdotl, sinim ,
         sin2u, sineo1, sini , sinip ,  sinsu , sinu  ,
         snod , su    , t2   , t3    ,  t4    , tem5  , temp,
         temp1, temp2 , tempa, tempe ,  templ , u     , ux  ,
         uy   , uz    , vx   , vy    ,  vz    , inclm , mm  ,
         nm   , nodem, xinc , xincp ,  xl    , xlm   , mp  ,
         xmdf , xmx   , xmy  , nodedf, xnode , nodep, tc  , dndt,
         twopi, x2o3  , j2   , j3    , tumin, j4 , xke   , j3oj2, radiusearthkm,
         mu, vkmpersec;
     <span class="keywordtype">int</span> ktr;

     <span class="comment">/* ------------------ set mathematical constants --------------- */</span>
     <span class="comment">// sgp4fix divisor for divide by zero check on inclination</span>
     <span class="keyword">const</span> <span class="keywordtype">double</span> temp4    =   1.0 + cos(<a class="code" href="sgp4unit_8cpp.html#a1daf785e3f68d293c7caa1c756d5cb74">pi</a>-1.0e-9);
     twopi = 2.0 * <a class="code" href="sgp4unit_8cpp.html#a1daf785e3f68d293c7caa1c756d5cb74">pi</a>;
     x2o3  = 2.0 / 3.0;
     <span class="comment">// sgp4fix identify constants and allow alternate values</span>
     <a class="code" href="namespacesgp4.html#a31d2ab9f0caa3186f2cf69282ceeb062">getgravconst</a>( whichconst, tumin, mu, radiusearthkm, xke, j2, j3, j4, j3oj2 );
     vkmpersec     = radiusearthkm * xke/60.0;

     <span class="comment">/* --------------------- clear sgp4 error flag ----------------- */</span>
     satrec.t     = tsince;
     satrec.error = 0;

     <span class="comment">/* ------- update for secular gravity and atmospheric drag ----- */</span>
         <span class="comment">//永続的な重力と大気抵抗のアップデート</span>
     xmdf    = satrec.mo + satrec.mdot * satrec.t;
     argpdf  = satrec.argpo + satrec.argpdot * satrec.t;
     nodedf  = satrec.nodeo + satrec.nodedot * satrec.t;
     argpm   = argpdf;
     mm      = xmdf;
     t2      = satrec.t * satrec.t;
     nodem   = nodedf + satrec.nodecf * t2;
     tempa   = 1.0 - satrec.cc1 * satrec.t;
     tempe   = satrec.bstar * satrec.cc4 * satrec.t;
     templ   = satrec.t2cof * t2;

     <span class="keywordflow">if</span> (satrec.isimp != 1)
       {
         delomg = satrec.omgcof * satrec.t;
         delm   = satrec.xmcof *
                  (pow((1.0 + satrec.eta * cos(xmdf)), 3) -
                  satrec.delmo);
         temp   = delomg + delm;
         mm     = xmdf + temp;
         argpm  = argpdf - temp;
         t3     = t2 * satrec.t;
         t4     = t3 * satrec.t;
         tempa  = tempa - satrec.d2 * t2 - satrec.d3 * t3 -
                          satrec.d4 * t4;
         tempe  = tempe + satrec.bstar * satrec.cc5 * (sin(mm) -
                          satrec.sinmao);
         templ  = templ + satrec.t3cof * t3 + t4 * (satrec.t4cof +
                          satrec.t * satrec.t5cof);
       }

     nm    = satrec.no;
     em    = satrec.ecco;
     inclm = satrec.inclo;
     <span class="keywordflow">if</span> (satrec.method == <span class="charliteral">&#39;d&#39;</span>)
       {
         tc = satrec.t;
         dspace
             (
               satrec.irez,
               satrec.d2201, satrec.d2211, satrec.d3210,
               satrec.d3222, satrec.d4410, satrec.d4422,
               satrec.d5220, satrec.d5232, satrec.d5421,
               satrec.d5433, satrec.dedt,  satrec.del1,
               satrec.del2,  satrec.del3,  satrec.didt,
               satrec.dmdt,  satrec.dnodt, satrec.domdt,
               satrec.argpo, satrec.argpdot, satrec.t, tc,
               satrec.gsto, satrec.xfact, satrec.xlamo,
               satrec.no, satrec.atime,
               em, argpm, inclm, satrec.xli, mm, satrec.xni,
               nodem, dndt, nm
             );
       } <span class="comment">// if method = d</span>

     <span class="keywordflow">if</span> (nm &lt;= 0.0)
       {
<span class="comment">//         printf(&quot;# error nm %f\n&quot;, nm);</span>
         satrec.error = 2;
       }
     am = pow((xke / nm), x2o3) * tempa * tempa;
     nm = xke / pow(am, 1.5);
     em = em - tempe;

     <span class="comment">// fix tolerance for error recognition</span>
     <span class="keywordflow">if</span> ((em &gt;= 1.0) || (em &lt; -0.001) || (am &lt; 0.95))
       {
<span class="comment">//         printf(&quot;# error em %f\n&quot;, em);</span>
         satrec.error = 1;
       }
     <span class="keywordflow">if</span> (em &lt; 0.0)
         em  = 1.0e-6;
     mm     = mm + satrec.no * templ;
     xlm    = mm + argpm + nodem;
     emsq   = em * em;
     temp   = 1.0 - emsq;

     nodem  = fmod(nodem, twopi);
     argpm  = fmod(argpm, twopi);
     xlm    = fmod(xlm, twopi);
     mm     = fmod(xlm - argpm - nodem, twopi);

     <span class="comment">/* ----------------- compute extra mean quantities ------------- */</span>
     sinim = sin(inclm);
     cosim = cos(inclm);

     <span class="comment">/* -------------------- add lunar-solar periodics -------------- */</span>
     ep     = em;
     xincp  = inclm;
     argpp  = argpm;
     nodep  = nodem;
     mp     = mm;
     sinip  = sinim;
     cosip  = cosim;
     <span class="keywordflow">if</span> (satrec.method == <span class="charliteral">&#39;d&#39;</span>)
       {
         dpper
             (
               satrec.e3,   satrec.ee2,  satrec.peo,
               satrec.pgho, satrec.pho,  satrec.pinco,
               satrec.plo,  satrec.se2,  satrec.se3,
               satrec.sgh2, satrec.sgh3, satrec.sgh4,
               satrec.sh2,  satrec.sh3,  satrec.si2,
               satrec.si3,  satrec.sl2,  satrec.sl3,
               satrec.sl4,  satrec.t,    satrec.xgh2,
               satrec.xgh3, satrec.xgh4, satrec.xh2,
               satrec.xh3,  satrec.xi2,  satrec.xi3,
               satrec.xl2,  satrec.xl3,  satrec.xl4,
               satrec.zmol, satrec.zmos, satrec.inclo,
               <span class="charliteral">&#39;n&#39;</span>, ep, xincp, nodep, argpp, mp
             );
         <span class="keywordflow">if</span> (xincp &lt; 0.0)
           {
             xincp  = -xincp;
             nodep = nodep + <a class="code" href="sgp4unit_8cpp.html#a1daf785e3f68d293c7caa1c756d5cb74">pi</a>;
             argpp  = argpp - <a class="code" href="sgp4unit_8cpp.html#a1daf785e3f68d293c7caa1c756d5cb74">pi</a>;
           }
         <span class="keywordflow">if</span> ((ep &lt; 0.0 ) || ( ep &gt; 1.0))
           {
 <span class="comment">//            printf(&quot;# error ep %f\n&quot;, ep);</span>
             satrec.error = 3;
           }
       } <span class="comment">// if method = d</span>

     <span class="comment">/* -------------------- long period periodics ------------------ */</span>
     <span class="keywordflow">if</span> (satrec.method == <span class="charliteral">&#39;d&#39;</span>)
       {
         sinip =  sin(xincp);
         cosip =  cos(xincp);
         satrec.aycof = -0.5*j3oj2*sinip;
         <span class="comment">// sgp4fix for divide by zero for xincp = 180 deg</span>
         <span class="keywordflow">if</span> (fabs(cosip+1.0) &gt; 1.5e-12)
             satrec.xlcof = -0.25 * j3oj2 * sinip * (3.0 + 5.0 * cosip) / (1.0 + cosip);
           <span class="keywordflow">else</span>
             satrec.xlcof = -0.25 * j3oj2 * sinip * (3.0 + 5.0 * cosip) / temp4;
       }
     axnl = ep * cos(argpp);
     temp = 1.0 / (am * (1.0 - ep * ep));
     aynl = ep* sin(argpp) + temp * satrec.aycof;
     xl   = mp + argpp + nodep + temp * satrec.xlcof * axnl;

     <span class="comment">/* --------------------- solve kepler&#39;s equation --------------- */</span>
         <span class="comment">//ケプラー方程式を解く</span>
     u    = fmod(xl - nodep, twopi);
     eo1  = u;
     tem5 = 9999.9;
     ktr = 1;
     <span class="comment">//   sgp4fix for kepler iteration</span>
     <span class="comment">//   the following iteration needs better limits on corrections</span>
     <span class="keywordflow">while</span> (( fabs(tem5) &gt;= 1.0e-12) &amp;&amp; (ktr &lt;= 10) )
       {
         sineo1 = sin(eo1);
         coseo1 = cos(eo1);
         tem5   = 1.0 - coseo1 * axnl - sineo1 * aynl;
         tem5   = (u - aynl * coseo1 + axnl * sineo1 - eo1) / tem5;
         <span class="keywordflow">if</span>(fabs(tem5) &gt;= 0.95)
             tem5 = tem5 &gt; 0.0 ? 0.95 : -0.95;
         eo1    = eo1 + tem5;
         ktr = ktr + 1;
       }

     <span class="comment">/* ------------- short period preliminary quantities ----------- */</span>
     ecose = axnl*coseo1 + aynl*sineo1;
     esine = axnl*sineo1 - aynl*coseo1;
     el2   = axnl*axnl + aynl*aynl;
     pl    = am*(1.0-el2);
     <span class="keywordflow">if</span> (pl &lt; 0.0)
       {
<span class="comment">//         printf(&quot;# error pl %f\n&quot;, pl);</span>
         satrec.error = 4;
       }
       <span class="keywordflow">else</span>
       {
         rl     = am * (1.0 - ecose);
         rdotl  = <a class="code" href="namespacestf_1_1util_1_1math.html#aaeb9c85b00f8c1afc33f9009e902e0d4" title="平方根を求める，cmathのラッパ．">sqrt</a>(am) * esine/rl;
         rvdotl = <a class="code" href="namespacestf_1_1util_1_1math.html#aaeb9c85b00f8c1afc33f9009e902e0d4" title="平方根を求める，cmathのラッパ．">sqrt</a>(pl) / rl;
         betal  = <a class="code" href="namespacestf_1_1util_1_1math.html#aaeb9c85b00f8c1afc33f9009e902e0d4" title="平方根を求める，cmathのラッパ．">sqrt</a>(1.0 - el2);
         temp   = esine / (1.0 + betal);
         sinu   = am / rl * (sineo1 - aynl - axnl * temp);
         cosu   = am / rl * (coseo1 - axnl + aynl * temp);
         su     = atan2(sinu, cosu);
         sin2u  = (cosu + cosu) * sinu;
         cos2u  = 1.0 - 2.0 * sinu * sinu;
         temp   = 1.0 / pl;
         temp1  = 0.5 * j2 * temp;
         temp2  = temp1 * temp;

         <span class="comment">/* -------------- update for short period periodics ------------ */</span>
         <span class="keywordflow">if</span> (satrec.method == <span class="charliteral">&#39;d&#39;</span>)
           {
             cosisq                 = cosip * cosip;
             satrec.con41  = 3.0*cosisq - 1.0;
             satrec.x1mth2 = 1.0 - cosisq;
             satrec.x7thm1 = 7.0*cosisq - 1.0;
           }
         mrt   = rl * (1.0 - 1.5 * temp2 * betal * satrec.con41) +
                 0.5 * temp1 * satrec.x1mth2 * cos2u;
         su    = su - 0.25 * temp2 * satrec.x7thm1 * sin2u;
         xnode = nodep + 1.5 * temp2 * cosip * sin2u;
         xinc  = xincp + 1.5 * temp2 * cosip * sinip * cos2u;
         mvt   = rdotl - nm * temp1 * satrec.x1mth2 * sin2u / xke;
         rvdot = rvdotl + nm * temp1 * (satrec.x1mth2 * cos2u +
                 1.5 * satrec.con41) / xke;

         <span class="comment">/* --------------------- orientation vectors ------------------- */</span>
         sinsu =  sin(su);
         cossu =  cos(su);
         snod  =  sin(xnode);
         cnod  =  cos(xnode);
         sini  =  sin(xinc);
         cosi  =  cos(xinc);
         xmx   = -snod * cosi;
         xmy   =  cnod * cosi;
         ux    =  xmx * sinsu + cnod * cossu;
         uy    =  xmy * sinsu + snod * cossu;
         uz    =  sini * sinsu;
         vx    =  xmx * cossu - cnod * sinsu;
         vy    =  xmy * cossu - snod * sinsu;
         vz    =  sini * cossu;

         <span class="comment">/* --------- position and velocity (in km and km/sec) ---------- */</span>
         r[0] = (mrt * ux)* radiusearthkm;
         r[1] = (mrt * uy)* radiusearthkm;
         r[2] = (mrt * uz)* radiusearthkm;
         <a class="code" href="namespacestf.html#afa89a4a0c80d3727c2f396aa3ead41cd">v</a>[0] = (mvt * ux + rvdot * vx) * vkmpersec;
         <a class="code" href="namespacestf.html#afa89a4a0c80d3727c2f396aa3ead41cd">v</a>[1] = (mvt * uy + rvdot * vy) * vkmpersec;
         <a class="code" href="namespacestf.html#afa89a4a0c80d3727c2f396aa3ead41cd">v</a>[2] = (mvt * uz + rvdot * vz) * vkmpersec;
       }  <span class="comment">// if pl &gt; 0</span>

     <span class="comment">// sgp4fix for decaying satellites</span>
     <span class="keywordflow">if</span> (mrt &lt; 1.0)             <span class="comment">//地球に激突して破壊？</span>
       {
<span class="comment">//         printf(&quot;# decay condition %11.6f \n&quot;, mrt);</span>
         satrec.error = 6;
       }


<span class="comment">//#include &quot;debug7.cpp&quot;</span>
     <span class="keywordflow">return</span> satrec.error;
}  <span class="comment">// end sgp4</span>
</pre></div>
</div>
</div>
<a class="anchor" id="ae96f1a3e9ef0450e3088d1d7632bc313"></a><!-- doxytag: member="sgp4::sgp4" ref="ae96f1a3e9ef0450e3088d1d7632bc313" args="(gravconsttype whichconst, elsetrec &amp;satrec, double tsince, double r[], double v[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sgp4::sgp4 </td>
          <td>(</td>
          <td class="paramtype">gravconsttype&#160;</td>
          <td class="paramname"><em>whichconst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">elsetrec &amp;&#160;</td>
          <td class="paramname"><em>satrec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>tsince</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>r</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>v</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ac99253d85e493f5725d01920b0303a69"></a><!-- doxytag: member="sgp4::sgp4init" ref="ac99253d85e493f5725d01920b0303a69" args="(gravconsttype whichconst, const int satn, const double epoch, const double xbstar, const double xecco, const double xargpo, const double xinclo, const double xmo, const double xno, const double xnodeo, elsetrec &amp;satrec)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sgp4::sgp4init </td>
          <td>(</td>
          <td class="paramtype">gravconsttype&#160;</td>
          <td class="paramname"><em>whichconst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>satn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>epoch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>xbstar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>xecco</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>xargpo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>xinclo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>xmo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>xno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>xnodeo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">elsetrec &amp;&#160;</td>
          <td class="paramname"><em>satrec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">sgp4unit.cpp</a> の <a class="el" href="#L1349">1349</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">{
     <span class="comment">/* --------------------- local variables ------------------------ */</span>
     <span class="keywordtype">double</span> ao, ainv,   con42, cosio, sinio, cosio2, eccsq,
          omeosq, posq,   <a class="code" href="namespaceigrf.html#a1670ea32cbb705b1f9dea16bd93019a3">rp</a>,     rteosq,
          cnodm , snodm , cosim , sinim , cosomm, sinomm, cc1sq ,
          cc2   , cc3   , coef  , coef1 , cosio4, day   , dndt  ,
          em    , emsq  , eeta  , etasq , gam   , argpm , nodem ,
          inclm , mm    , nm    , perige, pinvsq, psisq , qzms24,
          rtemsq, s1    , s2    , s3    , s4    , s5    , s6    ,
          s7    , sfour , ss1   , ss2   , ss3   , ss4   , ss5   ,
          ss6   , ss7   , sz1   , sz2   , sz3   , sz11  , sz12  ,
          sz13  , sz21  , sz22  , sz23  , sz31  , sz32  , sz33  ,
          tc    , temp  , temp1 , temp2 , temp3 , tsi   , xpidot,
          xhdot1, z1    , z2    , z3    , z11   , z12   , z13   ,
          z21   , z22   , z23   , z31   , z32   , z33,
          qzms2t, ss, j2, j3oj2, j4, x2o3, r[3], <a class="code" href="namespacestf.html#afa89a4a0c80d3727c2f396aa3ead41cd">v</a>[3],
          tumin, mu, radiusearthkm, xke, j3;

     <span class="comment">/* ------------------------ initialization --------------------- */</span>
     <span class="comment">// sgp4fix divisor for divide by zero check on inclination</span>
     <span class="keyword">const</span> <span class="keywordtype">double</span> temp4    =   1.0 + cos(<a class="code" href="sgp4unit_8cpp.html#a1daf785e3f68d293c7caa1c756d5cb74">pi</a>-1.0e-9);

     <span class="comment">/* ----------- set all near earth variables to zero ------------ */</span>
     satrec.isimp   = 0;   satrec.method = <span class="charliteral">&#39;n&#39;</span>; satrec.aycof    = 0.0;
     satrec.con41   = 0.0; satrec.cc1    = 0.0; satrec.cc4      = 0.0;
     satrec.cc5     = 0.0; satrec.d2     = 0.0; satrec.d3       = 0.0;
     satrec.d4      = 0.0; satrec.delmo  = 0.0; satrec.eta      = 0.0;
     satrec.argpdot = 0.0; satrec.omgcof = 0.0; satrec.sinmao   = 0.0;
     satrec.t       = 0.0; satrec.t2cof  = 0.0; satrec.t3cof    = 0.0;
     satrec.t4cof   = 0.0; satrec.t5cof  = 0.0; satrec.x1mth2   = 0.0;
     satrec.x7thm1  = 0.0; satrec.mdot   = 0.0; satrec.nodedot  = 0.0;
     satrec.xlcof   = 0.0; satrec.xmcof  = 0.0; satrec.nodecf   = 0.0;

     <span class="comment">/* ----------- set all deep space variables to zero ------------ */</span>
     satrec.irez  = 0;   satrec.d2201 = 0.0; satrec.d2211 = 0.0;
     satrec.d3210 = 0.0; satrec.d3222 = 0.0; satrec.d4410 = 0.0;
     satrec.d4422 = 0.0; satrec.d5220 = 0.0; satrec.d5232 = 0.0;
     satrec.d5421 = 0.0; satrec.d5433 = 0.0; satrec.dedt  = 0.0;
     satrec.del1  = 0.0; satrec.del2  = 0.0; satrec.del3  = 0.0;
     satrec.didt  = 0.0; satrec.dmdt  = 0.0; satrec.dnodt = 0.0;
     satrec.domdt = 0.0; satrec.e3    = 0.0; satrec.ee2   = 0.0;
     satrec.peo   = 0.0; satrec.pgho  = 0.0; satrec.pho   = 0.0;
     satrec.pinco = 0.0; satrec.plo   = 0.0; satrec.se2   = 0.0;
     satrec.se3   = 0.0; satrec.sgh2  = 0.0; satrec.sgh3  = 0.0;
     satrec.sgh4  = 0.0; satrec.sh2   = 0.0; satrec.sh3   = 0.0;
     satrec.si2   = 0.0; satrec.si3   = 0.0; satrec.sl2   = 0.0;
     satrec.sl3   = 0.0; satrec.sl4   = 0.0; satrec.gsto  = 0.0;
     satrec.xfact = 0.0; satrec.xgh2  = 0.0; satrec.xgh3  = 0.0;
     satrec.xgh4  = 0.0; satrec.xh2   = 0.0; satrec.xh3   = 0.0;
     satrec.xi2   = 0.0; satrec.xi3   = 0.0; satrec.xl2   = 0.0;
     satrec.xl3   = 0.0; satrec.xl4   = 0.0; satrec.xlamo = 0.0;
     satrec.zmol  = 0.0; satrec.zmos  = 0.0; satrec.atime = 0.0;
     satrec.xli   = 0.0; satrec.xni   = 0.0;

     <span class="comment">// sgp4fix - note the following variables are also passed directly via satrec.</span>
     <span class="comment">// it is possible to streamline the sgp4init call by deleting the &quot;x&quot;</span>
     <span class="comment">// variables, but the user would need to set the satrec.* values first. we</span>
     <span class="comment">// include the additional assignments in case twoline2rv is not used.</span>
         <span class="comment">//TLEを使わないで６要素を代入するとき用？</span>
     satrec.bstar   = xbstar;
     satrec.ecco    = xecco;
     satrec.argpo   = xargpo;
     satrec.inclo   = xinclo;
     satrec.mo      = xmo;
     satrec.no      = xno;
     satrec.nodeo   = xnodeo;

     <span class="comment">/* ------------------------ earth constants ----------------------- */</span>
     <span class="comment">// sgp4fix identify constants and allow alternate values</span>
     <a class="code" href="namespacesgp4.html#a31d2ab9f0caa3186f2cf69282ceeb062">getgravconst</a>( whichconst, tumin, mu, radiusearthkm, xke, j2, j3, j4, j3oj2 );
     ss     = 78.0 / radiusearthkm + 1.0;
     qzms2t = pow(((120.0 - 78.0) / radiusearthkm), 4);
     x2o3   =  2.0 / 3.0;

     satrec.init = <span class="charliteral">&#39;y&#39;</span>;
     satrec.t    = 0.0;

     initl
         (
           satn, whichconst, satrec.ecco, epoch, satrec.inclo, satrec.no, satrec.method,
           ainv, ao, satrec.con41, con42, cosio, cosio2, eccsq, omeosq,
           posq, rp, rteosq, sinio, satrec.gsto
         );
     satrec.error = 0;

     <span class="keywordflow">if</span> (rp &lt; 1.0)
       {
<span class="comment">//         printf(&quot;# *** satn%d epoch elts sub-orbital ***\n&quot;, satn);</span>
         satrec.error = 5;
       }

     <span class="keywordflow">if</span> ((omeosq &gt;= 0.0 ) || ( satrec.no &gt;= 0.0))
       {
         satrec.isimp = 0;
         <span class="keywordflow">if</span> (rp &lt; (220.0 / radiusearthkm + 1.0))
             satrec.isimp = 1;
         sfour  = ss;
         qzms24 = qzms2t;
         perige = (rp - 1.0) * radiusearthkm;

         <span class="comment">/* - for perigees below 156 km, s and qoms2t are altered - */</span>
         <span class="keywordflow">if</span> (perige &lt; 156.0)
           {
             sfour = perige - 78.0;
             <span class="keywordflow">if</span> (perige &lt; 98.0)
                 sfour = 20.0;
             qzms24 = pow(((120.0 - sfour) / radiusearthkm), 4.0);
             sfour  = sfour / radiusearthkm + 1.0;
           }
         pinvsq = 1.0 / posq;

         tsi  = 1.0 / (ao - sfour);
         satrec.eta  = ao * satrec.ecco * tsi;
         etasq = satrec.eta * satrec.eta;
         eeta  = satrec.ecco * satrec.eta;
         psisq = fabs(1.0 - etasq);
         coef  = qzms24 * pow(tsi, 4.0);
         coef1 = coef / pow(psisq, 3.5);
         cc2   = coef1 * satrec.no * (ao * (1.0 + 1.5 * etasq + eeta *
                        (4.0 + etasq)) + 0.375 * j2 * tsi / psisq * satrec.con41 *
                        (8.0 + 3.0 * etasq * (8.0 + etasq)));
         satrec.cc1   = satrec.bstar * cc2;
         cc3   = 0.0;
         <span class="keywordflow">if</span> (satrec.ecco &gt; 1.0e-4)
             cc3 = -2.0 * coef * tsi * j3oj2 * satrec.no * sinio / satrec.ecco;
         satrec.x1mth2 = 1.0 - cosio2;
         satrec.cc4    = 2.0* satrec.no * coef1 * ao * omeosq *
                           (satrec.eta * (2.0 + 0.5 * etasq) + satrec.ecco *
                           (0.5 + 2.0 * etasq) - j2 * tsi / (ao * psisq) *
                           (-3.0 * satrec.con41 * (1.0 - 2.0 * eeta + etasq *
                           (1.5 - 0.5 * eeta)) + 0.75 * satrec.x1mth2 *
                           (2.0 * etasq - eeta * (1.0 + etasq)) * cos(2.0 * satrec.argpo)));
         satrec.cc5 = 2.0 * coef1 * ao * omeosq * (1.0 + 2.75 *
                        (etasq + eeta) + eeta * etasq);
         cosio4 = cosio2 * cosio2;
         temp1  = 1.5 * j2 * pinvsq * satrec.no;
         temp2  = 0.5 * temp1 * j2 * pinvsq;
         temp3  = -0.46875 * j4 * pinvsq * pinvsq * satrec.no;
         satrec.mdot     = satrec.no + 0.5 * temp1 * rteosq * satrec.con41 + 0.0625 *
                            temp2 * rteosq * (13.0 - 78.0 * cosio2 + 137.0 * cosio4);
         satrec.argpdot  = -0.5 * temp1 * con42 + 0.0625 * temp2 *
                             (7.0 - 114.0 * cosio2 + 395.0 * cosio4) +
                             temp3 * (3.0 - 36.0 * cosio2 + 49.0 * cosio4);
         xhdot1            = -temp1 * cosio;
         satrec.nodedot = xhdot1 + (0.5 * temp2 * (4.0 - 19.0 * cosio2) +
                              2.0 * temp3 * (3.0 - 7.0 * cosio2)) * cosio;
         xpidot            =  satrec.argpdot+ satrec.nodedot;
         satrec.omgcof   = satrec.bstar * cc3 * cos(satrec.argpo);
         satrec.xmcof    = 0.0;
         <span class="keywordflow">if</span> (satrec.ecco &gt; 1.0e-4)
             satrec.xmcof = -x2o3 * coef * satrec.bstar / eeta;
         satrec.nodecf = 3.5 * omeosq * xhdot1 * satrec.cc1;
         satrec.t2cof   = 1.5 * satrec.cc1;
         <span class="comment">// sgp4fix for divide by zero with xinco = 180 deg</span>
         <span class="keywordflow">if</span> (fabs(cosio+1.0) &gt; 1.5e-12)
             satrec.xlcof = -0.25 * j3oj2 * sinio * (3.0 + 5.0 * cosio) / (1.0 + cosio);
           <span class="keywordflow">else</span>
             satrec.xlcof = -0.25 * j3oj2 * sinio * (3.0 + 5.0 * cosio) / temp4;
         satrec.aycof   = -0.5 * j3oj2 * sinio;
         satrec.delmo   = pow((1.0 + satrec.eta * cos(satrec.mo)), 3);
         satrec.sinmao  = sin(satrec.mo);
         satrec.x7thm1  = 7.0 * cosio2 - 1.0;

         <span class="comment">/* --------------- deep space initialization ------------- */</span>
         <span class="keywordflow">if</span> ((2*<a class="code" href="sgp4unit_8cpp.html#a1daf785e3f68d293c7caa1c756d5cb74">pi</a> / satrec.no) &gt;= 225.0)
           {
             satrec.method = <span class="charliteral">&#39;d&#39;</span>;
             satrec.isimp  = 1;
             tc    =  0.0;
             inclm = satrec.inclo;

             dscom
                 (
                   epoch, satrec.ecco, satrec.argpo, tc, satrec.inclo, satrec.nodeo,
                   satrec.no, snodm, cnodm,  sinim, cosim, sinomm,     cosomm,
                   day, satrec.e3, satrec.ee2, em,         emsq, gam,
                   satrec.peo,  satrec.pgho,   satrec.pho, satrec.pinco,
                   satrec.plo,  rtemsq,        satrec.se2, satrec.se3,
                   satrec.sgh2, satrec.sgh3,   satrec.sgh4,
                   satrec.sh2,  satrec.sh3,    satrec.si2, satrec.si3,
                   satrec.sl2,  satrec.sl3,    satrec.sl4, s1, s2, s3, s4, s5,
                   s6,   s7,   ss1,  ss2,  ss3,  ss4,  ss5,  ss6,  ss7, sz1, sz2, sz3,
                   sz11, sz12, sz13, sz21, sz22, sz23, sz31, sz32, sz33,
                   satrec.xgh2, satrec.xgh3,   satrec.xgh4, satrec.xh2,
                   satrec.xh3,  satrec.xi2,    satrec.xi3,  satrec.xl2,
                   satrec.xl3,  satrec.xl4,    nm, z1, z2, z3, z11,
                   z12, z13, z21, z22, z23, z31, z32, z33,
                   satrec.zmol, satrec.zmos
                 );
             dpper
                 (
                   satrec.e3, satrec.ee2, satrec.peo, satrec.pgho,
                   satrec.pho, satrec.pinco, satrec.plo, satrec.se2,
                   satrec.se3, satrec.sgh2, satrec.sgh3, satrec.sgh4,
                   satrec.sh2, satrec.sh3, satrec.si2,  satrec.si3,
                   satrec.sl2, satrec.sl3, satrec.sl4,  satrec.t,
                   satrec.xgh2, satrec.xgh3, satrec.xgh4, satrec.xh2,
                   satrec.xh3, satrec.xi2, satrec.xi3,  satrec.xl2,
                   satrec.xl3, satrec.xl4, satrec.zmol, satrec.zmos, inclm, satrec.init,
                   satrec.ecco, satrec.inclo, satrec.nodeo, satrec.argpo, satrec.mo
                 );

             argpm  = 0.0;
             nodem  = 0.0;
             mm     = 0.0;

             dsinit
                 (
                   whichconst,
                   cosim, emsq, satrec.argpo, s1, s2, s3, s4, s5, sinim, ss1, ss2, ss3, ss4,
                   ss5, sz1, sz3, sz11, sz13, sz21, sz23, sz31, sz33, satrec.t, tc,
                   satrec.gsto, satrec.mo, satrec.mdot, satrec.no, satrec.nodeo,
                   satrec.nodedot, xpidot, z1, z3, z11, z13, z21, z23, z31, z33,
                   satrec.ecco, eccsq, em, argpm, inclm, mm, nm, nodem,
                   satrec.irez,  satrec.atime,
                   satrec.d2201, satrec.d2211, satrec.d3210, satrec.d3222 ,
                   satrec.d4410, satrec.d4422, satrec.d5220, satrec.d5232,
                   satrec.d5421, satrec.d5433, satrec.dedt,  satrec.didt,
                   satrec.dmdt,  dndt,         satrec.dnodt, satrec.domdt ,
                   satrec.del1,  satrec.del2,  satrec.del3,  satrec.xfact,
                   satrec.xlamo, satrec.xli,   satrec.xni
                 );
           }

       <span class="comment">/* ----------- set variables if not deep space ----------- */</span>
       <span class="keywordflow">if</span> (satrec.isimp != 1)
         {
           cc1sq          = satrec.cc1 * satrec.cc1;
           satrec.d2    = 4.0 * ao * tsi * cc1sq;
           temp           = satrec.d2 * tsi * satrec.cc1 / 3.0;
           satrec.d3    = (17.0 * ao + sfour) * temp;
           satrec.d4    = 0.5 * temp * ao * tsi * (221.0 * ao + 31.0 * sfour) *
                            satrec.cc1;
           satrec.t3cof = satrec.d2 + 2.0 * cc1sq;
           satrec.t4cof = 0.25 * (3.0 * satrec.d3 + satrec.cc1 *
                            (12.0 * satrec.d2 + 10.0 * cc1sq));
           satrec.t5cof = 0.2 * (3.0 * satrec.d4 +
                            12.0 * satrec.cc1 * satrec.d3 +
                            6.0 * satrec.d2 * satrec.d2 +
                            15.0 * cc1sq * (2.0 * satrec.d2 + cc1sq));
         }
       } <span class="comment">// if omeosq = 0 ...</span>

       <span class="comment">/* finally propogate to zero epoch to initialise all others. */</span>
       <span class="keywordflow">if</span>(satrec.error == 0)
           <a class="code" href="namespacesgp4.html#adee1a80d66854d4af45c2a24df69a594">sgp4</a>(whichconst, satrec, 0.0, r, v);

       satrec.init = <span class="charliteral">&#39;n&#39;</span>;

<span class="comment">//#include &quot;debug6.cpp&quot;</span>
       <span class="keywordflow">return</span> satrec.error;
}  <span class="comment">// end sgp4init</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a499faf17ea23fa547ffab23852a73b3d"></a><!-- doxytag: member="sgp4::SiderealTime" ref="a499faf17ea23fa547ffab23852a73b3d" args="(double jd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double sgp4::SiderealTime </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>jd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">orbitutil.cpp</a> の <a class="el" href="#L72">72</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">                               {
        <span class="keywordtype">double</span> K    = jd - 2415020.0;   <span class="comment">//１９００年１月０日正午からの経過日数</span>
        <span class="keywordtype">double</span> Tu   = K/36525.0;
        <span class="keywordtype">double</span> gmst = 6+(38.0/60.0)+(45.836/3600.0) + 8640184.542*Tu/3600 + 0.0929*pow(Tu, 2)/3600;     <span class="comment">//ここでは時間単位</span>
        <span class="keywordflow">while</span>(gmst&gt;24){gmst-=24;}
        gmst *= 15;     <span class="comment">//ここでdeg単位に変換</span>

        <span class="keywordflow">return</span> gmst * <a class="code" href="orbitutil_8cpp.html#af7e8592d0a634bd3642e9fd508ea8022">DEG2RAD</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aaf7b0b8ca0b3373f4c447be71c5301f3"></a><!-- doxytag: member="sgp4::TransECIToGeo" ref="aaf7b0b8ca0b3373f4c447be71c5301f3" args="(double gmst, double *pos, double *lon, double *lat, double *alt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sgp4::TransECIToGeo </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>gmst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>lon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>lat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>alt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">orbitutil.cpp</a> の <a class="el" href="#L116">116</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">{
        <span class="comment">/* Procedure Calculate_LatLonAlt will calculate the geodetic  */</span>
        <span class="comment">/* position of an object given its ECI position pos and time. */</span>
        <span class="comment">/* It is intended to be used to determine the ground track of */</span>
        <span class="comment">/* a satellite.  The calculations  assume the earth to be an  */</span>
        <span class="comment">/* oblate spheroid as defined in WGS &#39;72.                     */</span>

        <span class="comment">/* Reference:  The 1992 Astronomical Almanac, page K12. */</span>

        <span class="keywordtype">double</span> r, e2, <a class="code" href="namespaceigrf.html#ae1c3cea569b6dc64778870fe439ef072">phi</a>, c;
        <span class="keywordtype">double</span> theta;

        theta=<a class="code" href="namespacesgp4.html#a6ba0a1de0611eb0e0b7201933cc554d1">AcTan</a>(pos[1], pos[0]); <span class="comment">/* radians */</span>
        *lon=<a class="code" href="namespacesgp4.html#ad494013e1053a9198a9bd832ae274968">FMod2p</a>(theta-gmst); <span class="comment">/* radians */</span>  <span class="comment">//東経が正？</span>
        r=<a class="code" href="namespacestf_1_1util_1_1math.html#aaeb9c85b00f8c1afc33f9009e902e0d4" title="平方根を求める，cmathのラッパ．">sqrt</a>(pos[0]*pos[0]+pos[1]*pos[1]);
        e2=<a class="code" href="orbitutil_8cpp.html#a42257a545daf5b7933d6e8f96adc74f2">F</a>*(2-<a class="code" href="orbitutil_8cpp.html#a42257a545daf5b7933d6e8f96adc74f2">F</a>);
        *lat=<a class="code" href="namespacesgp4.html#a6ba0a1de0611eb0e0b7201933cc554d1">AcTan</a>(pos[2], r); <span class="comment">/* radians */</span>

        <span class="keywordflow">do</span>
        {
                phi=*lat;
                c=1/<a class="code" href="namespacestf_1_1util_1_1math.html#aaeb9c85b00f8c1afc33f9009e902e0d4" title="平方根を求める，cmathのラッパ．">sqrt</a>(1-e2*sin(phi)*sin(phi));
                *lat=<a class="code" href="namespacesgp4.html#a6ba0a1de0611eb0e0b7201933cc554d1">AcTan</a>(pos[2]+<a class="code" href="orbitutil_8cpp.html#a90005b838a7bf67ae53ade3ed4f8c01f">XKMPER</a>*c*e2*sin(phi), r);

        } <span class="keywordflow">while</span> (fabs(*lat-phi)&gt;=1E-10);

        *alt=r/cos(*lat)-<a class="code" href="orbitutil_8cpp.html#a90005b838a7bf67ae53ade3ed4f8c01f">XKMPER</a>*c; <span class="comment">/* kilometers */</span>     <span class="comment">//楕円体高さ</span>

        <span class="keywordflow">if</span> (*lat&gt;<a class="code" href="orbitutil_8cpp.html#a51748a840c42f3194f8bd1f991b9a0ad">PIO2</a>)
                *lat-=<a class="code" href="orbitutil_8cpp.html#a4912c64aec0c943b7985db6cb61ff83a">TWOPI</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab49fc7d8fdbe1c7e023c3813e23ac58f"></a><!-- doxytag: member="sgp4::TransGAxis" ref="ab49fc7d8fdbe1c7e023c3813e23ac58f" args="(double *pos, double gmst, double *gpos)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sgp4::TransGAxis </td>
          <td>(</td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>gmst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>gpos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">orbitutil.cpp</a> の <a class="el" href="#L102">102</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordtype">double</span> cgmst = cos(gmst);
        <span class="keywordtype">double</span> sgmst = sin(gmst);

        gpos[0] = pos[0] * cgmst + pos[1] * sgmst;
        gpos[1] = -pos[0] * sgmst + pos[1] * cgmst;
        gpos[2] = pos[2];

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7e24ee7f1d6c6d0f6daab2c86535d193"></a><!-- doxytag: member="sgp4::TransGeoToGAxis" ref="a7e24ee7f1d6c6d0f6daab2c86535d193" args="(double lon, double lat, double alt, double *pos)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sgp4::TransGeoToGAxis </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>alt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">orbitutil.cpp</a> の <a class="el" href="#L84">84</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordtype">double</span> n;
        <span class="keywordtype">double</span> <a class="code" href="namespaceigrf.html#ac6f5f35bd8a92a659ac6d9e015d963a8">clat</a> = cos(lat);
        <span class="keywordtype">double</span> <a class="code" href="namespaceigrf.html#a4f07b29495fc706357f14a3757fe4d9b">slat</a> = sin(lat);
        <span class="keywordtype">double</span> clon = cos(lon);
        <span class="keywordtype">double</span> slon = sin(lon);

        n = <a class="code" href="orbitutil_8cpp.html#a90005b838a7bf67ae53ade3ed4f8c01f">XKMPER</a> / pow(1-<a class="code" href="orbitutil_8cpp.html#a42257a545daf5b7933d6e8f96adc74f2">F</a>*(2-<a class="code" href="orbitutil_8cpp.html#a42257a545daf5b7933d6e8f96adc74f2">F</a>)*slat*slat, 0.5 );

        pos[0] = (n+alt) * clat * clon;
        pos[1] = (n+alt) * clat * slon;
        pos[2] = (n+alt-<a class="code" href="orbitutil_8cpp.html#a42257a545daf5b7933d6e8f96adc74f2">F</a>*(2-<a class="code" href="orbitutil_8cpp.html#a42257a545daf5b7933d6e8f96adc74f2">F</a>)*n) * <a class="code" href="namespaceigrf.html#a4f07b29495fc706357f14a3757fe4d9b">slat</a>;

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a291d74ec01a1ba363d6cc3b455a98b8c"></a><!-- doxytag: member="sgp4::twoline2rv" ref="a291d74ec01a1ba363d6cc3b455a98b8c" args="(char longstr1[130], char longstr2[130], char typerun, char typeinput, gravconsttype whichconst, double &amp;startmfe, double &amp;stopmfe, double &amp;deltamin, elsetrec &amp;satrec)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sgp4::twoline2rv </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>longstr1</em>[130], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>longstr2</em>[130], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>typerun</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>typeinput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gravconsttype&#160;</td>
          <td class="paramname"><em>whichconst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>startmfe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>stopmfe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>deltamin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">elsetrec &amp;&#160;</td>
          <td class="paramname"><em>satrec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="">sgp4io.cpp</a> の <a class="el" href="#L83">83</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">     {
       <span class="keyword">const</span> <span class="keywordtype">double</span> deg2rad  =   <a class="code" href="sgp4io_8cpp.html#a1daf785e3f68d293c7caa1c756d5cb74">pi</a> / 180.0;         <span class="comment">//   0.0174532925199433</span>
       <span class="keyword">const</span> <span class="keywordtype">double</span> xpdotp   =  1440.0 / (2.0 *<a class="code" href="sgp4io_8cpp.html#a1daf785e3f68d293c7caa1c756d5cb74">pi</a>);  <span class="comment">// 229.1831180523293</span>

       <span class="keywordtype">double</span> sec, mu, radiusearthkm, tumin, xke, j2, j3, j4, j3oj2;
       <span class="keywordtype">double</span> startsec, stopsec, startdayofyr, stopdayofyr, jdstart, jdstop;
       <span class="keywordtype">int</span> startyear, stopyear, startmon, stopmon, startday, stopday,
           starthr, stophr, startmin, stopmin;
       <span class="keywordtype">int</span> cardnumb, numb, j;
       <span class="keywordtype">long</span> revnum = 0, elnum = 0;
       <span class="keywordtype">char</span> classification, intldesg[11], tmpstr[80];
       <span class="keywordtype">int</span> year = 0;
       <span class="keywordtype">int</span> mon, day, hr, minute, nexp, ibexp;

       <a class="code" href="namespacesgp4.html#a31d2ab9f0caa3186f2cf69282ceeb062">getgravconst</a>( whichconst, tumin, mu, radiusearthkm, xke, j2, j3, j4, j3oj2 );

       satrec.error = 0;

       <span class="comment">// set the implied decimal points since doing a formated read</span>
       <span class="comment">// fixes for bad input data values (missing, ...)</span>
       <span class="keywordflow">for</span> (j = 10; j &lt;= 15; j++)
           <span class="keywordflow">if</span> (longstr1[j] == <span class="charliteral">&#39; &#39;</span>)
               longstr1[j] = <span class="charliteral">&#39;_&#39;</span>;

       <span class="keywordflow">if</span> (longstr1[44] != <span class="charliteral">&#39; &#39;</span>)
           longstr1[43] = longstr1[44];
       longstr1[44] = <span class="charliteral">&#39;.&#39;</span>;
       <span class="keywordflow">if</span> (longstr1[7] == <span class="charliteral">&#39; &#39;</span>)
           longstr1[7] = <span class="charliteral">&#39;U&#39;</span>;
       <span class="keywordflow">if</span> (longstr1[9] == <span class="charliteral">&#39; &#39;</span>)
           longstr1[9] = <span class="charliteral">&#39;.&#39;</span>;
       <span class="keywordflow">for</span> (j = 45; j &lt;= 49; j++)
           <span class="keywordflow">if</span> (longstr1[j] == <span class="charliteral">&#39; &#39;</span>)
               longstr1[j] = <span class="charliteral">&#39;0&#39;</span>;
       <span class="keywordflow">if</span> (longstr1[51] == <span class="charliteral">&#39; &#39;</span>)
           longstr1[51] = <span class="charliteral">&#39;0&#39;</span>;
       <span class="keywordflow">if</span> (longstr1[53] != <span class="charliteral">&#39; &#39;</span>)
           longstr1[52] = longstr1[53];
       longstr1[53] = <span class="charliteral">&#39;.&#39;</span>;
       longstr2[25] = <span class="charliteral">&#39;.&#39;</span>;
       <span class="keywordflow">for</span> (j = 26; j &lt;= 32; j++)
           <span class="keywordflow">if</span> (longstr2[j] == <span class="charliteral">&#39; &#39;</span>)
               longstr2[j] = <span class="charliteral">&#39;0&#39;</span>;
       <span class="keywordflow">if</span> (longstr1[62] == <span class="charliteral">&#39; &#39;</span>)
           longstr1[62] = <span class="charliteral">&#39;0&#39;</span>;
       <span class="keywordflow">if</span> (longstr1[68] == <span class="charliteral">&#39; &#39;</span>)
           longstr1[68] = <span class="charliteral">&#39;0&#39;</span>;

       sscanf(longstr1, <span class="stringliteral">&quot;%2d %5ld %1c %10s %2d %12lf %11lf %7lf %2d %7lf %2d %2d %6ld &quot;</span>,
                       &amp;cardnumb,&amp;satrec.satnum,&amp;classification, intldesg, &amp;satrec.epochyr,
                       &amp;satrec.epochdays,&amp;satrec.ndot, &amp;satrec.nddot, &amp;nexp, &amp;satrec.bstar,
                       &amp;ibexp, &amp;numb, &amp;elnum );

       <span class="keywordflow">if</span> (typerun == <span class="charliteral">&#39;v&#39;</span>)  <span class="comment">// run for specified times from the file</span>
         {
           <span class="keywordflow">if</span> (longstr2[52] == <span class="charliteral">&#39; &#39;</span>)
               sscanf(longstr2, <span class="stringliteral">&quot;%2d %5ld %9lf %9lf %8lf %9lf %9lf %10lf %6ld %lf %lf %lf \n&quot;</span>,
                       &amp;cardnumb,&amp;satrec.satnum, &amp;satrec.inclo,
                       &amp;satrec.nodeo,&amp;satrec.ecco, &amp;satrec.argpo, &amp;satrec.mo, &amp;satrec.no,
                       &amp;revnum, &amp;startmfe, &amp;stopmfe, &amp;deltamin );
             <span class="keywordflow">else</span>
               sscanf(longstr2, <span class="stringliteral">&quot;%2d %5ld %9lf %9lf %8lf %9lf %9lf %11lf %6ld %lf %lf %lf \n&quot;</span>,
                       &amp;cardnumb,&amp;satrec.satnum, &amp;satrec.inclo,
                       &amp;satrec.nodeo,&amp;satrec.ecco, &amp;satrec.argpo, &amp;satrec.mo, &amp;satrec.no,
                       &amp; revnum, &amp;startmfe, &amp;stopmfe, &amp;deltamin );
                <span class="comment">//incl 軌道傾斜角</span>
                <span class="comment">//node 昇交点赤経</span>
                <span class="comment">//ecc 離心率</span>
                <span class="comment">//argp 近地点引数</span>
                <span class="comment">//m 平均近点角(Mean Anomaly)</span>
                <span class="comment">//n 平均運動</span>
                <span class="comment">//revnum 元期における通算周回数</span>
         }
         <span class="keywordflow">else</span>  <span class="comment">// simply run -1 day to +1 day or user input times</span>
         {
           <span class="keywordflow">if</span> (longstr2[52] == <span class="charliteral">&#39; &#39;</span>)
               sscanf(longstr2, <span class="stringliteral">&quot;%2d %5ld %9lf %9lf %8lf %9lf %9lf %10lf %6ld \n&quot;</span>,
                       &amp;cardnumb,&amp;satrec.satnum, &amp;satrec.inclo,
                       &amp;satrec.nodeo,&amp;satrec.ecco, &amp;satrec.argpo, &amp;satrec.mo, &amp;satrec.no,
                       &amp;revnum );
             <span class="keywordflow">else</span>
               sscanf(longstr2, <span class="stringliteral">&quot;%2d %5ld %9lf %9lf %8lf %9lf %9lf %11lf %6ld \n&quot;</span>,
                       &amp;cardnumb,&amp;satrec.satnum, &amp;satrec.inclo,
                       &amp;satrec.nodeo,&amp;satrec.ecco, &amp;satrec.argpo, &amp;satrec.mo, &amp;satrec.no,
                       &amp;revnum );
         }

       <span class="comment">// ---- find no, ndot, nddot ----</span>
       satrec.no   = satrec.no / xpdotp; <span class="comment">//* rad/min</span>
       satrec.nddot= satrec.nddot * pow(10.0, nexp);
       satrec.bstar= satrec.bstar * pow(10.0, ibexp);

       <span class="comment">// ---- convert to sgp4 units ----</span>
       satrec.a    = pow( satrec.no*tumin , (-2.0/3.0) );
       satrec.ndot = satrec.ndot  / (xpdotp*1440.0);  <span class="comment">//* ? * minperday</span>
       satrec.nddot= satrec.nddot / (xpdotp*1440.0*1440);

       <span class="comment">// ---- find standard orbital elements ----</span>
       satrec.inclo = satrec.inclo  * deg2rad;
       satrec.nodeo = satrec.nodeo  * deg2rad;
       satrec.argpo = satrec.argpo  * deg2rad;
       satrec.mo    = satrec.mo     * deg2rad;

       satrec.alta = satrec.a*(1.0 + satrec.ecco) - 1.0;
       satrec.altp = satrec.a*(1.0 - satrec.ecco) - 1.0;

       <span class="comment">// ----------------------------------------------------------------</span>
       <span class="comment">// find sgp4epoch time of element set</span>
       <span class="comment">// remember that sgp4 uses units of days from 0 jan 1950 (sgp4epoch)</span>
       <span class="comment">// and minutes from the epoch (time)</span>
       <span class="comment">// ----------------------------------------------------------------</span>

       <span class="comment">// ---------------- temp fix for years from 1957-2056 -------------------</span>
       <span class="comment">// --------- correct fix will occur when year is 4-digit in tle ---------</span>
       <span class="keywordflow">if</span> (satrec.epochyr &lt; 57)
           year= satrec.epochyr + 2000;
         <span class="keywordflow">else</span>
           year= satrec.epochyr + 1900;

       <a class="code" href="namespacesgp4.html#a4650c9e8c59a3a79421c9112b68cce74">days2mdhms</a> ( year, satrec.epochdays, mon, day, hr, minute, sec );
       <a class="code" href="namespacesgp4.html#a68d086bce456f80fbde1e96b5a5a1d90">jday</a>( year, mon, day, hr, minute, sec, satrec.jdsatepoch );

       <span class="comment">// ---- input start stop times manually</span>
       <span class="keywordflow">if</span> ((typerun != <span class="charliteral">&#39;v&#39;</span>) &amp;&amp; (typerun != <span class="charliteral">&#39;c&#39;</span>))
         {
         <span class="comment">// ------------- enter start/stop ymd hms values --------------------</span>
           <span class="keywordflow">if</span> (typeinput == <span class="charliteral">&#39;e&#39;</span>)
             {
               printf(<span class="stringliteral">&quot;input start prop year mon day hr min sec \n&quot;</span>);
               <span class="comment">// make sure there is no space at the end of the format specifiers in scanf!</span>
               scanf( <span class="stringliteral">&quot;%i %i %i %i %i %lf&quot;</span>,&amp;startyear, &amp;startmon, &amp;startday, &amp;starthr, &amp;startmin, &amp;startsec);
               fflush(stdin);
               <a class="code" href="namespacesgp4.html#a68d086bce456f80fbde1e96b5a5a1d90">jday</a>( startyear, startmon, startday, starthr, startmin, startsec, jdstart );

               printf(<span class="stringliteral">&quot;input stop prop year mon day hr min sec \n&quot;</span>);
               scanf( <span class="stringliteral">&quot;%i %i %i %i %i %lf&quot;</span>,&amp;stopyear, &amp;stopmon, &amp;stopday, &amp;stophr, &amp;stopmin, &amp;stopsec);
               fflush(stdin);
               <a class="code" href="namespacesgp4.html#a68d086bce456f80fbde1e96b5a5a1d90">jday</a>( stopyear, stopmon, stopday, stophr, stopmin, stopsec, jdstop );

               startmfe = (jdstart - satrec.jdsatepoch) * 1440.0;
               stopmfe  = (jdstop - satrec.jdsatepoch) * 1440.0;

               printf(<span class="stringliteral">&quot;input time step in minutes \n&quot;</span>);
               scanf( <span class="stringliteral">&quot;%lf&quot;</span>,&amp;deltamin );
             }
           <span class="comment">// -------- enter start/stop year and days of year values -----------</span>
           <span class="keywordflow">if</span> (typeinput == <span class="charliteral">&#39;d&#39;</span>)
             {
               printf(<span class="stringliteral">&quot;input start year dayofyr \n&quot;</span>);
               scanf( <span class="stringliteral">&quot;%li %lf&quot;</span>,&amp;startyear, &amp;startdayofyr );
               printf(<span class="stringliteral">&quot;input stop year dayofyr \n&quot;</span>);
               scanf( <span class="stringliteral">&quot;%li %lf&quot;</span>,&amp;stopyear, &amp;stopdayofyr );

               <a class="code" href="namespacesgp4.html#a4650c9e8c59a3a79421c9112b68cce74">days2mdhms</a> ( startyear, startdayofyr, mon, day, hr, minute, sec );
               <a class="code" href="namespacesgp4.html#a68d086bce456f80fbde1e96b5a5a1d90">jday</a>( startyear, mon, day, hr, minute, sec, jdstart );
               <a class="code" href="namespacesgp4.html#a4650c9e8c59a3a79421c9112b68cce74">days2mdhms</a> ( stopyear, stopdayofyr, mon, day, hr, minute, sec );
               <a class="code" href="namespacesgp4.html#a68d086bce456f80fbde1e96b5a5a1d90">jday</a>( stopyear, mon, day, hr, minute, sec, jdstop );

               startmfe = (jdstart - satrec.jdsatepoch) * 1440.0;
               stopmfe  = (jdstop - satrec.jdsatepoch) * 1440.0;

               printf(<span class="stringliteral">&quot;input time step in minutes \n&quot;</span>);
               scanf( <span class="stringliteral">&quot;%lf&quot;</span>,&amp;deltamin );
             }
           <span class="comment">// ------------------ enter start/stop mfe values -------------------</span>
           <span class="keywordflow">if</span> (typeinput == <span class="charliteral">&#39;m&#39;</span>)
             {
               printf(<span class="stringliteral">&quot;input start min from epoch \n&quot;</span>);
               scanf( <span class="stringliteral">&quot;%lf&quot;</span>,&amp;startmfe );
               printf(<span class="stringliteral">&quot;input stop min from epoch \n&quot;</span>);
               scanf( <span class="stringliteral">&quot;%lf&quot;</span>,&amp;stopmfe );
               printf(<span class="stringliteral">&quot;input time step in minutes \n&quot;</span>);
               scanf( <span class="stringliteral">&quot;%lf&quot;</span>,&amp;deltamin );
             }
         }

       <span class="comment">// ------------ perform complete catalog evaluation, -+ 1 day ----------- </span>
       <span class="keywordflow">if</span> (typerun == <span class="charliteral">&#39;c&#39;</span>)
         {
           startmfe = -1440.0;
           stopmfe  =  1440.0;
           deltamin =    10.0;
         }

       <span class="comment">// ---------------- initialize the orbit at sgp4epoch -------------------</span>
       <a class="code" href="namespacesgp4.html#ac99253d85e493f5725d01920b0303a69">sgp4init</a>( whichconst, satrec.satnum, satrec.jdsatepoch-2433281.5, satrec.bstar,
                 satrec.ecco, satrec.argpo, satrec.inclo, satrec.mo, satrec.no,
                 satrec.nodeo, satrec);
    } <span class="comment">// end twoline2rv</span>
</pre></div>
</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>全て</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>クラス</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>ネームスペース</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>ファイル</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>関数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>変数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>型定義</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>列挙型</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>列挙型の値</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>フレンド</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>マクロ定義</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>STFに対してWed Mar 23 2011 05:33:01に生成されました。&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
