<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>STF: stf/environment/sgp4/sgp4io.cpp ソースファイル</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- 作成： Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'検索');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">STF</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li><a href="annotated.html"><span>クラス</span></a></li>
      <li class="current"><a href="files.html"><span>ファイル</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="検索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>ファイル一覧</span></a></li>
      <li><a href="globals.html"><span>ファイルメンバ</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>stf/environment/sgp4/sgp4io.cpp</h1>  </div>
</div>
<div class="contents">
<a href="sgp4io_8cpp.html">説明を見る。</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00008"></a>00008 <span class="comment">/*     ----------------------------------------------------------------</span>
<a name="l00009"></a>00009 <span class="comment">*                                               TLE読み込み用ファイル</span>
<a name="l00010"></a>00010 <span class="comment">*</span>
<a name="l00011"></a>00011 <span class="comment">*                               sgp4io.cpp</span>
<a name="l00012"></a>00012 <span class="comment">*</span>
<a name="l00013"></a>00013 <span class="comment">*    this file contains a function to read two line element sets. while </span>
<a name="l00014"></a>00014 <span class="comment">*    not formerly part of the sgp4 mathematical theory, it is </span>
<a name="l00015"></a>00015 <span class="comment">*    required for practical implemenation.</span>
<a name="l00016"></a>00016 <span class="comment">*</span>
<a name="l00017"></a>00017 <span class="comment">*                            companion code for</span>
<a name="l00018"></a>00018 <span class="comment">*               fundamentals of astrodynamics and applications</span>
<a name="l00019"></a>00019 <span class="comment">*                                    2007</span>
<a name="l00020"></a>00020 <span class="comment">*                              by david vallado</span>
<a name="l00021"></a>00021 <span class="comment">*</span>
<a name="l00022"></a>00022 <span class="comment">*       (w) 719-573-2600, email dvallado@agi.com</span>
<a name="l00023"></a>00023 <span class="comment">*</span>
<a name="l00024"></a>00024 <span class="comment">*    current :</span>
<a name="l00025"></a>00025 <span class="comment">*               9 may 07  david vallado</span>
<a name="l00026"></a>00026 <span class="comment">*                           fix year correction to 57</span>
<a name="l00027"></a>00027 <span class="comment">*    changes :</span>
<a name="l00028"></a>00028 <span class="comment">*              27 mar 07  david vallado</span>
<a name="l00029"></a>00029 <span class="comment">*                           misc fixes to manual inputs</span>
<a name="l00030"></a>00030 <span class="comment">*              14 aug 06  david vallado</span>
<a name="l00031"></a>00031 <span class="comment">*                           original baseline</span>
<a name="l00032"></a>00032 <span class="comment">*       ----------------------------------------------------------------      */</span>
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="sgp4ext_8h.html" title="NJHILSから持ってきた軌道計算関係モジュールを，sgp4名前空間でラップして使用．">sgp4ext.h</a>&quot;</span>    <span class="comment">// for several misc routines</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="sgp4unit_8h.html" title="NJHILSから持ってきた軌道計算関係モジュールを，sgp4名前空間でラップして使用．">sgp4unit.h</a>&quot;</span>   <span class="comment">// for sgp4init and getgravconst</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="sgp4io_8h.html" title="NJHILSから持ってきた軌道計算関係モジュールを，sgp4名前空間でラップして使用．">sgp4io.h</a>&quot;</span>
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 <span class="preprocessor">#pragma warning ( disable : 4996 )              //fopenエラー回避</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span>
<a name="l00040"></a><a class="code" href="sgp4io_8cpp.html#a1daf785e3f68d293c7caa1c756d5cb74">00040</a> <span class="preprocessor">#define pi 3.14159265358979323846</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span>
<a name="l00042"></a>00042 <span class="keyword">namespace </span><a class="code" href="namespacesgp4.html#adee1a80d66854d4af45c2a24df69a594">sgp4</a> {
<a name="l00043"></a>00043 <span class="comment">/* -----------------------------------------------------------------------------</span>
<a name="l00044"></a>00044 <span class="comment">*</span>
<a name="l00045"></a>00045 <span class="comment">*                           function twoline2rv</span>
<a name="l00046"></a>00046 <span class="comment">*</span>
<a name="l00047"></a>00047 <span class="comment">*  this function converts the two line element set character string data to</span>
<a name="l00048"></a>00048 <span class="comment">*    variables and initializes the sgp4 variables. several intermediate varaibles</span>
<a name="l00049"></a>00049 <span class="comment">*    and quantities are determined. note that the result is a structure so multiple</span>
<a name="l00050"></a>00050 <span class="comment">*    satellites can be processed simultaneously without having to reinitialize. the</span>
<a name="l00051"></a>00051 <span class="comment">*    verification mode is an important option that permits quick checks of any</span>
<a name="l00052"></a>00052 <span class="comment">*    changes to the underlying technical theory. this option works using a</span>
<a name="l00053"></a>00053 <span class="comment">*    modified tle file in which the start, stop, and delta time values are</span>
<a name="l00054"></a>00054 <span class="comment">*    included at the end of the second line of data. this only works with the</span>
<a name="l00055"></a>00055 <span class="comment">*    verification mode. the catalog mode simply propagates from -1440 to 1440 min</span>
<a name="l00056"></a>00056 <span class="comment">*    from epoch and is useful when performing entire catalog runs.</span>
<a name="l00057"></a>00057 <span class="comment">*</span>
<a name="l00058"></a>00058 <span class="comment">*  author        : david vallado                  719-573-2600    1 mar 2001</span>
<a name="l00059"></a>00059 <span class="comment">*</span>
<a name="l00060"></a>00060 <span class="comment">*  inputs        :</span>
<a name="l00061"></a>00061 <span class="comment">*    longstr1    - first line of the tle</span>
<a name="l00062"></a>00062 <span class="comment">*    longstr2    - second line of the tle</span>
<a name="l00063"></a>00063 <span class="comment">*    typerun     - type of run                    verification &#39;v&#39;, catalog &#39;c&#39;, </span>
<a name="l00064"></a>00064 <span class="comment">*                                                 manual &#39;m&#39;</span>
<a name="l00065"></a>00065 <span class="comment">*    typeinput   - type of manual input           mfe &#39;m&#39;, epoch &#39;e&#39;, dayofyr &#39;d&#39;</span>
<a name="l00066"></a>00066 <span class="comment">*    whichconst  - which set of constants to use  72, 84</span>
<a name="l00067"></a>00067 <span class="comment">*</span>
<a name="l00068"></a>00068 <span class="comment">*  outputs       :</span>
<a name="l00069"></a>00069 <span class="comment">*    satrec      - structure containing all the sgp4 satellite information</span>
<a name="l00070"></a>00070 <span class="comment">*</span>
<a name="l00071"></a>00071 <span class="comment">*  coupling      :</span>
<a name="l00072"></a>00072 <span class="comment">*    getgravconst-</span>
<a name="l00073"></a>00073 <span class="comment">*    days2mdhms  - conversion of days to month, day, hour, minute, second</span>
<a name="l00074"></a>00074 <span class="comment">*    jday        - convert day month year hour minute second into julian date</span>
<a name="l00075"></a>00075 <span class="comment">*    sgp4init    - initialize the sgp4 variables</span>
<a name="l00076"></a>00076 <span class="comment">*</span>
<a name="l00077"></a>00077 <span class="comment">*  references    :</span>
<a name="l00078"></a>00078 <span class="comment">*    norad spacetrack report #3</span>
<a name="l00079"></a>00079 <span class="comment">*    vallado, crawford, hujsak, kelso  2006</span>
<a name="l00080"></a>00080 <span class="comment">  --------------------------------------------------------------------------- */</span>
<a name="l00081"></a>00081 
<a name="l00082"></a>00082 <span class="keywordtype">void</span> <a class="code" href="namespacesgp4.html#a291d74ec01a1ba363d6cc3b455a98b8c">twoline2rv</a>
<a name="l00083"></a><a class="code" href="namespacesgp4.html#a291d74ec01a1ba363d6cc3b455a98b8c">00083</a>      (
<a name="l00084"></a>00084       <span class="keywordtype">char</span>      longstr1[130], <span class="keywordtype">char</span> longstr2[130],
<a name="l00085"></a>00085       <span class="keywordtype">char</span>      typerun,  <span class="keywordtype">char</span> typeinput,
<a name="l00086"></a>00086       <a class="code" href="namespacesgp4.html#a84be244094e484a8e83cc5dcb7b46e9e">gravconsttype</a>       whichconst,
<a name="l00087"></a>00087       <span class="keywordtype">double</span>&amp; startmfe, <span class="keywordtype">double</span>&amp; stopmfe, <span class="keywordtype">double</span>&amp; deltamin,
<a name="l00088"></a>00088       <a class="code" href="structsgp4_1_1elsetrec.html">elsetrec</a>&amp; satrec
<a name="l00089"></a>00089      )
<a name="l00090"></a>00090      {
<a name="l00091"></a>00091        <span class="keyword">const</span> <span class="keywordtype">double</span> deg2rad  =   <a class="code" href="sgp4io_8cpp.html#a1daf785e3f68d293c7caa1c756d5cb74">pi</a> / 180.0;         <span class="comment">//   0.0174532925199433</span>
<a name="l00092"></a>00092        <span class="keyword">const</span> <span class="keywordtype">double</span> xpdotp   =  1440.0 / (2.0 *<a class="code" href="sgp4io_8cpp.html#a1daf785e3f68d293c7caa1c756d5cb74">pi</a>);  <span class="comment">// 229.1831180523293</span>
<a name="l00093"></a>00093 
<a name="l00094"></a>00094        <span class="keywordtype">double</span> sec, mu, radiusearthkm, tumin, xke, j2, j3, j4, j3oj2;
<a name="l00095"></a>00095        <span class="keywordtype">double</span> startsec, stopsec, startdayofyr, stopdayofyr, jdstart, jdstop;
<a name="l00096"></a>00096        <span class="keywordtype">int</span> startyear, stopyear, startmon, stopmon, startday, stopday,
<a name="l00097"></a>00097            starthr, stophr, startmin, stopmin;
<a name="l00098"></a>00098        <span class="keywordtype">int</span> cardnumb, numb, j;
<a name="l00099"></a>00099        <span class="keywordtype">long</span> revnum = 0, elnum = 0;
<a name="l00100"></a>00100        <span class="keywordtype">char</span> classification, intldesg[11], tmpstr[80];
<a name="l00101"></a>00101        <span class="keywordtype">int</span> year = 0;
<a name="l00102"></a>00102        <span class="keywordtype">int</span> mon, day, hr, minute, nexp, ibexp;
<a name="l00103"></a>00103 
<a name="l00104"></a>00104        <a class="code" href="namespacesgp4.html#a31d2ab9f0caa3186f2cf69282ceeb062">getgravconst</a>( whichconst, tumin, mu, radiusearthkm, xke, j2, j3, j4, j3oj2 );
<a name="l00105"></a>00105 
<a name="l00106"></a>00106        satrec.<a class="code" href="structsgp4_1_1elsetrec.html#ab57488058495a162e7c6af4125010601">error</a> = 0;
<a name="l00107"></a>00107 
<a name="l00108"></a>00108        <span class="comment">// set the implied decimal points since doing a formated read</span>
<a name="l00109"></a>00109        <span class="comment">// fixes for bad input data values (missing, ...)</span>
<a name="l00110"></a>00110        <span class="keywordflow">for</span> (j = 10; j &lt;= 15; j++)
<a name="l00111"></a>00111            <span class="keywordflow">if</span> (longstr1[j] == <span class="charliteral">&#39; &#39;</span>)
<a name="l00112"></a>00112                longstr1[j] = <span class="charliteral">&#39;_&#39;</span>;
<a name="l00113"></a>00113 
<a name="l00114"></a>00114        <span class="keywordflow">if</span> (longstr1[44] != <span class="charliteral">&#39; &#39;</span>)
<a name="l00115"></a>00115            longstr1[43] = longstr1[44];
<a name="l00116"></a>00116        longstr1[44] = <span class="charliteral">&#39;.&#39;</span>;
<a name="l00117"></a>00117        <span class="keywordflow">if</span> (longstr1[7] == <span class="charliteral">&#39; &#39;</span>)
<a name="l00118"></a>00118            longstr1[7] = <span class="charliteral">&#39;U&#39;</span>;
<a name="l00119"></a>00119        <span class="keywordflow">if</span> (longstr1[9] == <span class="charliteral">&#39; &#39;</span>)
<a name="l00120"></a>00120            longstr1[9] = <span class="charliteral">&#39;.&#39;</span>;
<a name="l00121"></a>00121        <span class="keywordflow">for</span> (j = 45; j &lt;= 49; j++)
<a name="l00122"></a>00122            <span class="keywordflow">if</span> (longstr1[j] == <span class="charliteral">&#39; &#39;</span>)
<a name="l00123"></a>00123                longstr1[j] = <span class="charliteral">&#39;0&#39;</span>;
<a name="l00124"></a>00124        <span class="keywordflow">if</span> (longstr1[51] == <span class="charliteral">&#39; &#39;</span>)
<a name="l00125"></a>00125            longstr1[51] = <span class="charliteral">&#39;0&#39;</span>;
<a name="l00126"></a>00126        <span class="keywordflow">if</span> (longstr1[53] != <span class="charliteral">&#39; &#39;</span>)
<a name="l00127"></a>00127            longstr1[52] = longstr1[53];
<a name="l00128"></a>00128        longstr1[53] = <span class="charliteral">&#39;.&#39;</span>;
<a name="l00129"></a>00129        longstr2[25] = <span class="charliteral">&#39;.&#39;</span>;
<a name="l00130"></a>00130        <span class="keywordflow">for</span> (j = 26; j &lt;= 32; j++)
<a name="l00131"></a>00131            <span class="keywordflow">if</span> (longstr2[j] == <span class="charliteral">&#39; &#39;</span>)
<a name="l00132"></a>00132                longstr2[j] = <span class="charliteral">&#39;0&#39;</span>;
<a name="l00133"></a>00133        <span class="keywordflow">if</span> (longstr1[62] == <span class="charliteral">&#39; &#39;</span>)
<a name="l00134"></a>00134            longstr1[62] = <span class="charliteral">&#39;0&#39;</span>;
<a name="l00135"></a>00135        <span class="keywordflow">if</span> (longstr1[68] == <span class="charliteral">&#39; &#39;</span>)
<a name="l00136"></a>00136            longstr1[68] = <span class="charliteral">&#39;0&#39;</span>;
<a name="l00137"></a>00137 
<a name="l00138"></a>00138        sscanf(longstr1, <span class="stringliteral">&quot;%2d %5ld %1c %10s %2d %12lf %11lf %7lf %2d %7lf %2d %2d %6ld &quot;</span>,
<a name="l00139"></a>00139                        &amp;cardnumb,&amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a569684cf9a0784f47b9de8c3719114d9">satnum</a>,&amp;classification, intldesg, &amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#aad1edbbac2965ef1ffcece716ea8967e">epochyr</a>,
<a name="l00140"></a>00140                        &amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#af139a6a1d57827bc1cde88dfb82d95e4">epochdays</a>,&amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#afc3af5db2e482add71892ef28716e07a">ndot</a>, &amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#aadf2bfacf0f6c68fa5e1c45c147e84b6">nddot</a>, &amp;nexp, &amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#ad233e8f033deadeb4fba78afca69f1e2">bstar</a>,
<a name="l00141"></a>00141                        &amp;ibexp, &amp;numb, &amp;elnum );
<a name="l00142"></a>00142 
<a name="l00143"></a>00143        <span class="keywordflow">if</span> (typerun == <span class="charliteral">&#39;v&#39;</span>)  <span class="comment">// run for specified times from the file</span>
<a name="l00144"></a>00144          {
<a name="l00145"></a>00145            <span class="keywordflow">if</span> (longstr2[52] == <span class="charliteral">&#39; &#39;</span>)
<a name="l00146"></a>00146                sscanf(longstr2, <span class="stringliteral">&quot;%2d %5ld %9lf %9lf %8lf %9lf %9lf %10lf %6ld %lf %lf %lf \n&quot;</span>,
<a name="l00147"></a>00147                        &amp;cardnumb,&amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a569684cf9a0784f47b9de8c3719114d9">satnum</a>, &amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#ad69aded71b2fbc457bf143b1bbca4077">inclo</a>,
<a name="l00148"></a>00148                        &amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a5c105875bca592c8e6b6d2ed88e9daca">nodeo</a>,&amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#aea8f7ce64ca1d8ac15e199800cb4ec2d">ecco</a>, &amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a073ae4cc4c39266a89e0af4d00a5b0c9">argpo</a>, &amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#aaccdff46abfb7e511b85796baf2d3651">mo</a>, &amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#ab27aa09ea2d04427a21ddb763ca3c449">no</a>,
<a name="l00149"></a>00149                        &amp;revnum, &amp;startmfe, &amp;stopmfe, &amp;deltamin );
<a name="l00150"></a>00150              <span class="keywordflow">else</span>
<a name="l00151"></a>00151                sscanf(longstr2, <span class="stringliteral">&quot;%2d %5ld %9lf %9lf %8lf %9lf %9lf %11lf %6ld %lf %lf %lf \n&quot;</span>,
<a name="l00152"></a>00152                        &amp;cardnumb,&amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a569684cf9a0784f47b9de8c3719114d9">satnum</a>, &amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#ad69aded71b2fbc457bf143b1bbca4077">inclo</a>,
<a name="l00153"></a>00153                        &amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a5c105875bca592c8e6b6d2ed88e9daca">nodeo</a>,&amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#aea8f7ce64ca1d8ac15e199800cb4ec2d">ecco</a>, &amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a073ae4cc4c39266a89e0af4d00a5b0c9">argpo</a>, &amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#aaccdff46abfb7e511b85796baf2d3651">mo</a>, &amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#ab27aa09ea2d04427a21ddb763ca3c449">no</a>,
<a name="l00154"></a>00154                        &amp; revnum, &amp;startmfe, &amp;stopmfe, &amp;deltamin );
<a name="l00155"></a>00155                 <span class="comment">//incl 軌道傾斜角</span>
<a name="l00156"></a>00156                 <span class="comment">//node 昇交点赤経</span>
<a name="l00157"></a>00157                 <span class="comment">//ecc 離心率</span>
<a name="l00158"></a>00158                 <span class="comment">//argp 近地点引数</span>
<a name="l00159"></a>00159                 <span class="comment">//m 平均近点角(Mean Anomaly)</span>
<a name="l00160"></a>00160                 <span class="comment">//n 平均運動</span>
<a name="l00161"></a>00161                 <span class="comment">//revnum 元期における通算周回数</span>
<a name="l00162"></a>00162          }
<a name="l00163"></a>00163          <span class="keywordflow">else</span>  <span class="comment">// simply run -1 day to +1 day or user input times</span>
<a name="l00164"></a>00164          {
<a name="l00165"></a>00165            <span class="keywordflow">if</span> (longstr2[52] == <span class="charliteral">&#39; &#39;</span>)
<a name="l00166"></a>00166                sscanf(longstr2, <span class="stringliteral">&quot;%2d %5ld %9lf %9lf %8lf %9lf %9lf %10lf %6ld \n&quot;</span>,
<a name="l00167"></a>00167                        &amp;cardnumb,&amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a569684cf9a0784f47b9de8c3719114d9">satnum</a>, &amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#ad69aded71b2fbc457bf143b1bbca4077">inclo</a>,
<a name="l00168"></a>00168                        &amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a5c105875bca592c8e6b6d2ed88e9daca">nodeo</a>,&amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#aea8f7ce64ca1d8ac15e199800cb4ec2d">ecco</a>, &amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a073ae4cc4c39266a89e0af4d00a5b0c9">argpo</a>, &amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#aaccdff46abfb7e511b85796baf2d3651">mo</a>, &amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#ab27aa09ea2d04427a21ddb763ca3c449">no</a>,
<a name="l00169"></a>00169                        &amp;revnum );
<a name="l00170"></a>00170              <span class="keywordflow">else</span>
<a name="l00171"></a>00171                sscanf(longstr2, <span class="stringliteral">&quot;%2d %5ld %9lf %9lf %8lf %9lf %9lf %11lf %6ld \n&quot;</span>,
<a name="l00172"></a>00172                        &amp;cardnumb,&amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a569684cf9a0784f47b9de8c3719114d9">satnum</a>, &amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#ad69aded71b2fbc457bf143b1bbca4077">inclo</a>,
<a name="l00173"></a>00173                        &amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a5c105875bca592c8e6b6d2ed88e9daca">nodeo</a>,&amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#aea8f7ce64ca1d8ac15e199800cb4ec2d">ecco</a>, &amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a073ae4cc4c39266a89e0af4d00a5b0c9">argpo</a>, &amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#aaccdff46abfb7e511b85796baf2d3651">mo</a>, &amp;satrec.<a class="code" href="structsgp4_1_1elsetrec.html#ab27aa09ea2d04427a21ddb763ca3c449">no</a>,
<a name="l00174"></a>00174                        &amp;revnum );
<a name="l00175"></a>00175          }
<a name="l00176"></a>00176 
<a name="l00177"></a>00177        <span class="comment">// ---- find no, ndot, nddot ----</span>
<a name="l00178"></a>00178        satrec.<a class="code" href="structsgp4_1_1elsetrec.html#ab27aa09ea2d04427a21ddb763ca3c449">no</a>   = satrec.<a class="code" href="structsgp4_1_1elsetrec.html#ab27aa09ea2d04427a21ddb763ca3c449">no</a> / xpdotp; <span class="comment">//* rad/min</span>
<a name="l00179"></a>00179        satrec.<a class="code" href="structsgp4_1_1elsetrec.html#aadf2bfacf0f6c68fa5e1c45c147e84b6">nddot</a>= satrec.<a class="code" href="structsgp4_1_1elsetrec.html#aadf2bfacf0f6c68fa5e1c45c147e84b6">nddot</a> * pow(10.0, nexp);
<a name="l00180"></a>00180        satrec.<a class="code" href="structsgp4_1_1elsetrec.html#ad233e8f033deadeb4fba78afca69f1e2">bstar</a>= satrec.<a class="code" href="structsgp4_1_1elsetrec.html#ad233e8f033deadeb4fba78afca69f1e2">bstar</a> * pow(10.0, ibexp);
<a name="l00181"></a>00181 
<a name="l00182"></a>00182        <span class="comment">// ---- convert to sgp4 units ----</span>
<a name="l00183"></a>00183        satrec.<a class="code" href="structsgp4_1_1elsetrec.html#aa793268dbee20d1455feec159b5919c6">a</a>    = pow( satrec.<a class="code" href="structsgp4_1_1elsetrec.html#ab27aa09ea2d04427a21ddb763ca3c449">no</a>*tumin , (-2.0/3.0) );
<a name="l00184"></a>00184        satrec.<a class="code" href="structsgp4_1_1elsetrec.html#afc3af5db2e482add71892ef28716e07a">ndot</a> = satrec.<a class="code" href="structsgp4_1_1elsetrec.html#afc3af5db2e482add71892ef28716e07a">ndot</a>  / (xpdotp*1440.0);  <span class="comment">//* ? * minperday</span>
<a name="l00185"></a>00185        satrec.<a class="code" href="structsgp4_1_1elsetrec.html#aadf2bfacf0f6c68fa5e1c45c147e84b6">nddot</a>= satrec.<a class="code" href="structsgp4_1_1elsetrec.html#aadf2bfacf0f6c68fa5e1c45c147e84b6">nddot</a> / (xpdotp*1440.0*1440);
<a name="l00186"></a>00186 
<a name="l00187"></a>00187        <span class="comment">// ---- find standard orbital elements ----</span>
<a name="l00188"></a>00188        satrec.<a class="code" href="structsgp4_1_1elsetrec.html#ad69aded71b2fbc457bf143b1bbca4077">inclo</a> = satrec.<a class="code" href="structsgp4_1_1elsetrec.html#ad69aded71b2fbc457bf143b1bbca4077">inclo</a>  * deg2rad;
<a name="l00189"></a>00189        satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a5c105875bca592c8e6b6d2ed88e9daca">nodeo</a> = satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a5c105875bca592c8e6b6d2ed88e9daca">nodeo</a>  * deg2rad;
<a name="l00190"></a>00190        satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a073ae4cc4c39266a89e0af4d00a5b0c9">argpo</a> = satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a073ae4cc4c39266a89e0af4d00a5b0c9">argpo</a>  * deg2rad;
<a name="l00191"></a>00191        satrec.<a class="code" href="structsgp4_1_1elsetrec.html#aaccdff46abfb7e511b85796baf2d3651">mo</a>    = satrec.<a class="code" href="structsgp4_1_1elsetrec.html#aaccdff46abfb7e511b85796baf2d3651">mo</a>     * deg2rad;
<a name="l00192"></a>00192 
<a name="l00193"></a>00193        satrec.<a class="code" href="structsgp4_1_1elsetrec.html#ab9009499a64f0937ed7fe23c924b6bc4">alta</a> = satrec.<a class="code" href="structsgp4_1_1elsetrec.html#aa793268dbee20d1455feec159b5919c6">a</a>*(1.0 + satrec.<a class="code" href="structsgp4_1_1elsetrec.html#aea8f7ce64ca1d8ac15e199800cb4ec2d">ecco</a>) - 1.0;
<a name="l00194"></a>00194        satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a56e804754376a4a98c9403b41ca5a735">altp</a> = satrec.<a class="code" href="structsgp4_1_1elsetrec.html#aa793268dbee20d1455feec159b5919c6">a</a>*(1.0 - satrec.<a class="code" href="structsgp4_1_1elsetrec.html#aea8f7ce64ca1d8ac15e199800cb4ec2d">ecco</a>) - 1.0;
<a name="l00195"></a>00195 
<a name="l00196"></a>00196        <span class="comment">// ----------------------------------------------------------------</span>
<a name="l00197"></a>00197        <span class="comment">// find sgp4epoch time of element set</span>
<a name="l00198"></a>00198        <span class="comment">// remember that sgp4 uses units of days from 0 jan 1950 (sgp4epoch)</span>
<a name="l00199"></a>00199        <span class="comment">// and minutes from the epoch (time)</span>
<a name="l00200"></a>00200        <span class="comment">// ----------------------------------------------------------------</span>
<a name="l00201"></a>00201 
<a name="l00202"></a>00202        <span class="comment">// ---------------- temp fix for years from 1957-2056 -------------------</span>
<a name="l00203"></a>00203        <span class="comment">// --------- correct fix will occur when year is 4-digit in tle ---------</span>
<a name="l00204"></a>00204        <span class="keywordflow">if</span> (satrec.<a class="code" href="structsgp4_1_1elsetrec.html#aad1edbbac2965ef1ffcece716ea8967e">epochyr</a> &lt; 57)
<a name="l00205"></a>00205            year= satrec.<a class="code" href="structsgp4_1_1elsetrec.html#aad1edbbac2965ef1ffcece716ea8967e">epochyr</a> + 2000;
<a name="l00206"></a>00206          <span class="keywordflow">else</span>
<a name="l00207"></a>00207            year= satrec.<a class="code" href="structsgp4_1_1elsetrec.html#aad1edbbac2965ef1ffcece716ea8967e">epochyr</a> + 1900;
<a name="l00208"></a>00208 
<a name="l00209"></a>00209        <a class="code" href="namespacesgp4.html#a4650c9e8c59a3a79421c9112b68cce74">days2mdhms</a> ( year, satrec.<a class="code" href="structsgp4_1_1elsetrec.html#af139a6a1d57827bc1cde88dfb82d95e4">epochdays</a>, mon, day, hr, minute, sec );
<a name="l00210"></a>00210        <a class="code" href="namespacesgp4.html#a68d086bce456f80fbde1e96b5a5a1d90">jday</a>( year, mon, day, hr, minute, sec, satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a6152b9ed91d45b52b7568ba225ea4746">jdsatepoch</a> );
<a name="l00211"></a>00211 
<a name="l00212"></a>00212        <span class="comment">// ---- input start stop times manually</span>
<a name="l00213"></a>00213        <span class="keywordflow">if</span> ((typerun != <span class="charliteral">&#39;v&#39;</span>) &amp;&amp; (typerun != <span class="charliteral">&#39;c&#39;</span>))
<a name="l00214"></a>00214          {
<a name="l00215"></a>00215          <span class="comment">// ------------- enter start/stop ymd hms values --------------------</span>
<a name="l00216"></a>00216            <span class="keywordflow">if</span> (typeinput == <span class="charliteral">&#39;e&#39;</span>)
<a name="l00217"></a>00217              {
<a name="l00218"></a>00218                printf(<span class="stringliteral">&quot;input start prop year mon day hr min sec \n&quot;</span>);
<a name="l00219"></a>00219                <span class="comment">// make sure there is no space at the end of the format specifiers in scanf!</span>
<a name="l00220"></a>00220                scanf( <span class="stringliteral">&quot;%i %i %i %i %i %lf&quot;</span>,&amp;startyear, &amp;startmon, &amp;startday, &amp;starthr, &amp;startmin, &amp;startsec);
<a name="l00221"></a>00221                fflush(stdin);
<a name="l00222"></a>00222                <a class="code" href="namespacesgp4.html#a68d086bce456f80fbde1e96b5a5a1d90">jday</a>( startyear, startmon, startday, starthr, startmin, startsec, jdstart );
<a name="l00223"></a>00223 
<a name="l00224"></a>00224                printf(<span class="stringliteral">&quot;input stop prop year mon day hr min sec \n&quot;</span>);
<a name="l00225"></a>00225                scanf( <span class="stringliteral">&quot;%i %i %i %i %i %lf&quot;</span>,&amp;stopyear, &amp;stopmon, &amp;stopday, &amp;stophr, &amp;stopmin, &amp;stopsec);
<a name="l00226"></a>00226                fflush(stdin);
<a name="l00227"></a>00227                <a class="code" href="namespacesgp4.html#a68d086bce456f80fbde1e96b5a5a1d90">jday</a>( stopyear, stopmon, stopday, stophr, stopmin, stopsec, jdstop );
<a name="l00228"></a>00228 
<a name="l00229"></a>00229                startmfe = (jdstart - satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a6152b9ed91d45b52b7568ba225ea4746">jdsatepoch</a>) * 1440.0;
<a name="l00230"></a>00230                stopmfe  = (jdstop - satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a6152b9ed91d45b52b7568ba225ea4746">jdsatepoch</a>) * 1440.0;
<a name="l00231"></a>00231 
<a name="l00232"></a>00232                printf(<span class="stringliteral">&quot;input time step in minutes \n&quot;</span>);
<a name="l00233"></a>00233                scanf( <span class="stringliteral">&quot;%lf&quot;</span>,&amp;deltamin );
<a name="l00234"></a>00234              }
<a name="l00235"></a>00235            <span class="comment">// -------- enter start/stop year and days of year values -----------</span>
<a name="l00236"></a>00236            <span class="keywordflow">if</span> (typeinput == <span class="charliteral">&#39;d&#39;</span>)
<a name="l00237"></a>00237              {
<a name="l00238"></a>00238                printf(<span class="stringliteral">&quot;input start year dayofyr \n&quot;</span>);
<a name="l00239"></a>00239                scanf( <span class="stringliteral">&quot;%li %lf&quot;</span>,&amp;startyear, &amp;startdayofyr );
<a name="l00240"></a>00240                printf(<span class="stringliteral">&quot;input stop year dayofyr \n&quot;</span>);
<a name="l00241"></a>00241                scanf( <span class="stringliteral">&quot;%li %lf&quot;</span>,&amp;stopyear, &amp;stopdayofyr );
<a name="l00242"></a>00242 
<a name="l00243"></a>00243                <a class="code" href="namespacesgp4.html#a4650c9e8c59a3a79421c9112b68cce74">days2mdhms</a> ( startyear, startdayofyr, mon, day, hr, minute, sec );
<a name="l00244"></a>00244                <a class="code" href="namespacesgp4.html#a68d086bce456f80fbde1e96b5a5a1d90">jday</a>( startyear, mon, day, hr, minute, sec, jdstart );
<a name="l00245"></a>00245                <a class="code" href="namespacesgp4.html#a4650c9e8c59a3a79421c9112b68cce74">days2mdhms</a> ( stopyear, stopdayofyr, mon, day, hr, minute, sec );
<a name="l00246"></a>00246                <a class="code" href="namespacesgp4.html#a68d086bce456f80fbde1e96b5a5a1d90">jday</a>( stopyear, mon, day, hr, minute, sec, jdstop );
<a name="l00247"></a>00247 
<a name="l00248"></a>00248                startmfe = (jdstart - satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a6152b9ed91d45b52b7568ba225ea4746">jdsatepoch</a>) * 1440.0;
<a name="l00249"></a>00249                stopmfe  = (jdstop - satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a6152b9ed91d45b52b7568ba225ea4746">jdsatepoch</a>) * 1440.0;
<a name="l00250"></a>00250 
<a name="l00251"></a>00251                printf(<span class="stringliteral">&quot;input time step in minutes \n&quot;</span>);
<a name="l00252"></a>00252                scanf( <span class="stringliteral">&quot;%lf&quot;</span>,&amp;deltamin );
<a name="l00253"></a>00253              }
<a name="l00254"></a>00254            <span class="comment">// ------------------ enter start/stop mfe values -------------------</span>
<a name="l00255"></a>00255            <span class="keywordflow">if</span> (typeinput == <span class="charliteral">&#39;m&#39;</span>)
<a name="l00256"></a>00256              {
<a name="l00257"></a>00257                printf(<span class="stringliteral">&quot;input start min from epoch \n&quot;</span>);
<a name="l00258"></a>00258                scanf( <span class="stringliteral">&quot;%lf&quot;</span>,&amp;startmfe );
<a name="l00259"></a>00259                printf(<span class="stringliteral">&quot;input stop min from epoch \n&quot;</span>);
<a name="l00260"></a>00260                scanf( <span class="stringliteral">&quot;%lf&quot;</span>,&amp;stopmfe );
<a name="l00261"></a>00261                printf(<span class="stringliteral">&quot;input time step in minutes \n&quot;</span>);
<a name="l00262"></a>00262                scanf( <span class="stringliteral">&quot;%lf&quot;</span>,&amp;deltamin );
<a name="l00263"></a>00263              }
<a name="l00264"></a>00264          }
<a name="l00265"></a>00265 
<a name="l00266"></a>00266        <span class="comment">// ------------ perform complete catalog evaluation, -+ 1 day ----------- </span>
<a name="l00267"></a>00267        <span class="keywordflow">if</span> (typerun == <span class="charliteral">&#39;c&#39;</span>)
<a name="l00268"></a>00268          {
<a name="l00269"></a>00269            startmfe = -1440.0;
<a name="l00270"></a>00270            stopmfe  =  1440.0;
<a name="l00271"></a>00271            deltamin =    10.0;
<a name="l00272"></a>00272          }
<a name="l00273"></a>00273 
<a name="l00274"></a>00274        <span class="comment">// ---------------- initialize the orbit at sgp4epoch -------------------</span>
<a name="l00275"></a>00275        <a class="code" href="namespacesgp4.html#ac99253d85e493f5725d01920b0303a69">sgp4init</a>( whichconst, satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a569684cf9a0784f47b9de8c3719114d9">satnum</a>, satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a6152b9ed91d45b52b7568ba225ea4746">jdsatepoch</a>-2433281.5, satrec.<a class="code" href="structsgp4_1_1elsetrec.html#ad233e8f033deadeb4fba78afca69f1e2">bstar</a>,
<a name="l00276"></a>00276                  satrec.<a class="code" href="structsgp4_1_1elsetrec.html#aea8f7ce64ca1d8ac15e199800cb4ec2d">ecco</a>, satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a073ae4cc4c39266a89e0af4d00a5b0c9">argpo</a>, satrec.<a class="code" href="structsgp4_1_1elsetrec.html#ad69aded71b2fbc457bf143b1bbca4077">inclo</a>, satrec.<a class="code" href="structsgp4_1_1elsetrec.html#aaccdff46abfb7e511b85796baf2d3651">mo</a>, satrec.<a class="code" href="structsgp4_1_1elsetrec.html#ab27aa09ea2d04427a21ddb763ca3c449">no</a>,
<a name="l00277"></a>00277                  satrec.<a class="code" href="structsgp4_1_1elsetrec.html#a5c105875bca592c8e6b6d2ed88e9daca">nodeo</a>, satrec);
<a name="l00278"></a>00278     } <span class="comment">// end twoline2rv</span>
<a name="l00279"></a>00279 
<a name="l00280"></a>00280 
<a name="l00281"></a>00281         } <span class="comment">/* end of namespace sgp4 */</span>
</pre></div></div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>全て</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>クラス</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>ネームスペース</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>ファイル</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>関数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>変数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>型定義</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>列挙型</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>列挙型の値</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>フレンド</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>マクロ定義</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>STFに対してTue Mar 1 2011 03:45:40に生成されました。&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
